(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{200:function(e,t,a){},208:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(32),r=a.n(c),s=(a(200),a(28)),i=a(24),o=(a(208),a(37)),d=a.n(o),l=a(65),u="https://agd-api.bial-x.com/v1/",j="ADD_BREADCRUMB",b=function(e){return{type:j,payload:e}},p="SET_LOADING",m=function(e){return{type:p,payload:e}},h="SET_LOADING_DATABASE",O=function(e){return{type:h,payload:e}},x="SET_NAVBAR",f=function(e){return{type:x,payload:e}},g="UPDATE",y=function(){return function(){var e=Object(l.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,fetch("".concat(u,"update"),{method:"POST"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),a="An error has occured: ".concat(e.t0.toString());case 9:return t({type:g,payload:a}),e.abrupt("return",{type:p,payload:!0});case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},v="GET_UPDATE_TIME",_="UPDATE_ALL_CONTRACTS",k=function(){return function(){var e=Object(l.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={error:"",data:[]},e.prev=1,e.next=4,fetch("".concat(u,"contracts"));case 4:if((n=e.sent).ok){e.next=9;break}a.error="An error has occured: ".concat(n.status),e.next=12;break;case 9:return e.next=11,n.json();case 11:a.data=e.sent;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),a.error="An error has occured: ".concat(e.t0.toString());case 17:t({type:_,payload:a});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},w="UPDATE_ALL_METADATA",C=function(){return function(){var e=Object(l.a)(d.a.mark((function e(t){var a,n,c,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={error:"",data:[]},e.prev=1,e.next=4,fetch("".concat(u,"metadata"));case 4:if((n=e.sent).ok){e.next=9;break}a.error="An error has occured: ".concat(n.status),e.next=23;break;case 9:return e.next=11,n.json();case 11:return c=e.sent,e.next=14,fetch("".concat(u,"documentsTypes"));case 14:if((r=e.sent).ok){e.next=19;break}a.error="An error has occured: ".concat(r.status),e.next=23;break;case 19:return e.next=21,r.json();case 21:s=e.sent,a.data={metadata:c,documentsTypes:s};case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),a.error="An error has occured: ".concat(e.t0.toString());case 28:t({type:w,payload:a});case 29:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}()},S="UPDATE_METADATA",T=function(e){return{type:S,payload:e}},N="DELETE_METADATA",I=function(e){return{type:N,payload:e}},E="ADD_METADATA",A=function(e){return{type:E,payload:e}},D="EDIT_GROUP",L="DELETE_GROUP",V="UPDATE_ALL_DOCUMENTS",R=function(){return function(){var e=Object(l.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={error:"",data:[]},e.prev=1,e.next=4,fetch("".concat(u,"documents"));case 4:if((n=e.sent).ok){e.next=9;break}a.error="An error has occured: ".concat(n.status),e.next=12;break;case 9:return e.next=11,n.json();case 11:a.data=e.sent;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),a.error="An error has occured: ".concat(e.t0.toString());case 17:t({type:V,payload:a});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},P="ADD_DOCUMENT",F=function(e){return{type:P,payload:e}},M="DELETE_DOCUMENT",q=function(e){return function(){var t=Object(l.a)(d.a.mark((function t(a){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",t.prev=1,t.next=4,fetch("".concat(u,"documents/").concat(e),{method:"DELETE"});case 4:(c=t.sent).ok||(n="An error has occured: ".concat(c.error)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n="An error has occured: ".concat(t.t0.toString());case 11:return a({type:M,payload:{error:n,id:e}}),t.abrupt("return",{type:p,payload:!0});case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},U="UPDATE_DOCUMENT",z=function(e){return{type:U,payload:e}},B="INIT_ALL",Y=function(){return function(){var e=Object(l.a)(d.a.mark((function e(t){var a,n,c,r,s,i,o,l,j,b,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={error:"",data:[]},n={error:"",data:[]},c={error:"",data:[]},r=null,e.prev=4,e.next=7,fetch("".concat(u,"metadata"));case 7:if((s=e.sent).ok){e.next=12;break}a.error="An error has occured: ".concat(s.status),e.next=53;break;case 12:return e.next=14,s.json();case 14:return i=e.sent,e.next=17,fetch("".concat(u,"documentsTypes"));case 17:if((o=e.sent).ok){e.next=22;break}a.error="An error has occured: ".concat(o.status),e.next=53;break;case 22:return e.next=24,o.json();case 24:return l=e.sent,a.data={metadata:i,documentsTypes:l},e.next=28,fetch("".concat(u,"documents"));case 28:if((j=e.sent).ok){e.next=33;break}n.error="An error has occured: ".concat(j.status),e.next=53;break;case 33:return e.next=35,j.json();case 35:return n.data=e.sent,e.next=38,fetch("".concat(u,"contracts"));case 38:if((b=e.sent).ok){e.next=43;break}c.error="An error has occured: ".concat(b.status),e.next=53;break;case 43:return e.next=45,b.json();case 45:return c.data=e.sent,e.next=48,fetch("".concat(u,"update/datetime"));case 48:return p=e.sent,e.next=51,p.json();case 51:r=(r=e.sent).update_datetime.substr(0,16);case 53:e.next=61;break;case 55:e.prev=55,e.t0=e.catch(4),a.error="An error has occured: ".concat(e.t0.toString()),n.error="An error has occured: ".concat(e.t0.toString()),c.error="An error has occured: ".concat(e.t0.toString()),r="An error has occured: ".concat(e.t0.toString());case 61:t({type:B,payload:{metadata:a,documents:n,contracts:c,updateTime:r}});case 62:case"end":return e.stop()}}),e,null,[[4,55]])})));return function(t){return e.apply(this,arguments)}}()},G="UPDATE_FILTER_CONTRACT",J=function(e){return{type:G,payload:e}},K="UPDATE_FILTER_DOCUMENT",H=function(e){return{type:K,payload:e}},X="GET_ALL_KEYWORDS",W="SET_METADATA_FROM_DOCUMENTS",$=function(e){return function(){var t=Object(l.a)(d.a.mark((function t(a){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={error:"",data:[],contractId:e},t.prev=1,t.next=4,fetch("".concat(u,"contracts/metadatas/").concat(e),{method:"POST"});case 4:if((c=t.sent).ok){t.next=9;break}n.error="An error has occured: ".concat(c.status),t.next=12;break;case 9:return t.next=11,c.json();case 11:n.data=t.sent;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),n.error="An error has occured: ".concat(t.t0.toString());case 17:a({type:W,payload:n});case 18:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}()},Z=a(18),Q=a(303),ee=a(42),te=a(189),ae=a(105),ne=a(59),ce=a(295),re=a(298),se=a(291),ie=a(293),oe=a(72),de=a(34),le=a(7),ue=a(29),je=a.n(ue),be=a(191),pe=a(193),me=a(158),he=a.n(me),Oe=a(116),xe=a(143),fe=a(290),ge=a(192),ye=a(306),ve=a.p+"static/media/searchFilled.1c5bfba7.svg",_e=a(1),ke="",we="",Ce=null,Se=[],Te=function(e,t,a){t();var n=Object(Z.a)(e,1)[0];ke=n,we=a},Ne=function(e){e(),ke=""},Ie=function(e,t,a,n,c){return{filterDropdown:function(a){var n=a.setSelectedKeys,c=a.selectedKeys,r=a.confirm,s=a.clearFilters;return Object(_e.jsx)("div",{className:"list_utils",children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsx)(ne.a,{span:24,children:Object(_e.jsx)(re.a,{ref:function(e){Ce=e},placeholder:"Rechercher ".concat(t),value:c[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return Te(c,r,e)}})}),Object(_e.jsx)(ne.a,{span:12,children:Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){return Te(c,r,e)},icon:Object(_e.jsx)(xe.a,{}),children:"Rechercher"})}),Object(_e.jsx)(ne.a,{span:12,children:Object(_e.jsx)(ee.a,{onClick:function(){Ne(s)},children:"R\xe9initialiser"})})]})})},filterIcon:function(e){return e?Object(_e.jsx)(fe.a,{style:{color:"#5EC2D7"},component:function(){return Object(_e.jsx)("svg",{width:"2em",height:"2em",fill:"#5EC2D7",viewBox:"0 0 1024 1024",children:Object(_e.jsx)("image",{x:"0",y:"0",height:"1000.7",width:"100%",xlinkHref:ve})})}}):Object(_e.jsx)(xe.a,{style:{color:void 0,fontSize:"1.9em"}})},onFilter:function(t,n){if(Array.isArray(a)){var c=n;return a.map((function(e){c=c[e]})),c?c.toString().toLowerCase().includes(t.toLowerCase()):""}return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return Ce.select()}),100)},render:function(t,a){var r=t;if(c&&(r=t.substr(0,10)),n){var s=a;return n.var.map((function(e){s=s[e]})),we===e?Object(_e.jsx)(i.a,{to:n.path+s,children:Object(_e.jsx)(he.a,{highlightStyle:{backgroundColor:"#C2E8F0",padding:0},searchWords:[ke],autoEscape:!0,textToHighlight:r?r.toString():""})}):Object(_e.jsx)(i.a,{to:n.path+s,children:r})}return we===e?Object(_e.jsx)(he.a,{highlightStyle:{backgroundColor:"#C2E8F0",padding:0},searchWords:[ke],autoEscape:!0,textToHighlight:r?r.toString():""}):r}}},Ee={weekday:"long",year:"numeric",month:"long",day:"numeric"},Ae={year:"numeric"},De=function(e){return new Date(e).toLocaleDateString("fr-FR",Ee)},Le=function(e){return new Date(e).toLocaleDateString("fr-FR",Ae)},Ve="dddd Do MMMM YYYY",Re=function(e,t){return e&&e.split("-")[1]?e.split("-")[1].match(/^\d+$/)?e.split("-")[1]:e.split("-")[0]:t},Pe=function(e,t){return!e.filter((function(e){return!0===e.isInVersion&&e.document_type_id===t})).length>0},Fe=function(e,t){var a=e.find((function(e){return e.document_type_id===t}));return a?a.value:"inconnu"},Me=function(e,t){console.log(e,t);var a=e.find((function(e){return e.document_type_id===t}));return a?a.key:"???"},qe=function(e,t){console.log(e,t),console.log("ICI");var a=[];e&&(a=e);var n=[];return Object.keys(t).map((function(e){return t[e].map((function(t){a.includes(t.metadata_id)&&(n[e]?(n[e].obj.push(t),n[e].list.push(t.value),n[e].idList.push(t.metadata_id)):n[e]={obj:[t],list:[t.value],idList:[t.metadata_id]})}))})),console.log(n),n};function Ue(e){var t=e.documents,a=e.title,n=e.size,c=e.isButton,r=e.onClickButton,s=e.isPreview,i=e.loading,o=e.documentsTypes,d=[];return s?d.push(Object(le.a)(Object(le.a)({title:"Nom",dataIndex:"name",key:"name",sorter:function(e,t){return e.name.trim().localeCompare(t.name.trim())}},Ie("name","nom")),{},{width:"50%"})):d.push(Object(le.a)(Object(le.a)({title:"Nom",dataIndex:"name",key:"name",sorter:function(e,t){return e.name.trim().localeCompare(t.name.trim())}},Ie("name","nom",null,{path:"/documents/",var:["document_id"]})),{},{width:"50%"})),d.push.apply(d,[Object(le.a)(Object(le.a)({title:"Date",dataIndex:"date",key:"date",sorter:{compare:function(e,t){return e.date.trim().localeCompare(t.date.trim())}}},Ie("date","date",null,null,!0)),{},{width:"20%",render:function(e){return je()(e).format(Ve)}}),Object(le.a)(Object(le.a)({title:"Type",dataIndex:"type",key:"type",sorter:function(e,t){return e.type.trim().localeCompare(t.type.trim())}},Ie("type","type")),{},{width:"15%",render:function(e){return Fe(o,e)}})]),(c||s)&&d.push({dataIndex:"document_id",key:"document_id",width:"5%",render:function(e,t){return Object(_e.jsxs)(_e.Fragment,{children:[s&&Object(_e.jsx)(ee.a,{onClick:function(){return window.open("/documents/".concat(e),"_blank").focus},children:Object(_e.jsx)(be.a,{})},Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)),c&&Object(_e.jsx)(ee.a,{onClick:function(){return r(t)},children:Object(_e.jsx)(pe.a,{})},Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5))]})}}),Object(_e.jsx)("div",{className:"list-documents",children:Object(_e.jsx)(ae.a,{children:Object(_e.jsx)(ne.a,{span:24,children:a?Object(_e.jsx)(ce.a,{title:a,children:Object(_e.jsx)(ie.a,{loading:i,columns:d,dataSource:t,pagination:{pageSize:n},rowKey:"document_id"})}):Object(_e.jsx)(ie.a,{loading:i,columns:d,dataSource:t,pagination:{pageSize:n||10,hideOnSinglePage:!0},rowKey:"document_id"})})})})}var ze=a(307),Be=a(308),Ye=a(97),Ge=a(47);function Je(e){var t=e.status,a=e.style;return"Opportunity"===t?Object(_e.jsx)(ze.a,{style:a}):"In-progress"===t?Object(_e.jsx)(Be.a,{style:a}):"Closed"===t?Object(_e.jsx)(Ye.a,{style:a}):Object(_e.jsx)(Ge.a,{style:a})}function Ke(e){var t,a,n=e.contracts,c=e.loading,r=e.size,s=e.isButton,i=e.onClickButton,o=e.isPreview,d=[];return o?d.push(Object(le.a)(Object(le.a)({title:"Titre",dataIndex:"title",key:"title",sorter:{compare:function(e,t){return e.title.trim().localeCompare(t.title.trim())}}},Ie("title","titre")),{},{width:"40%"})):d.push(Object(le.a)(Object(le.a)({title:"Titre",dataIndex:"title",key:"title",sorter:{compare:function(e,t){return e.title.trim().localeCompare(t.title.trim())}}},Ie("title","titre",null,{path:"/contracts/",var:["contract_id"]})),{},{width:"40%"})),d.push.apply(d,[Object(le.a)(Object(le.a)({title:"Client",dataIndex:"customer_name",key:"customer_name",sorter:{compare:function(e,t){return e.customer_name.trim().localeCompare(t.customer_name.trim())}}},Ie("customer_name","client")),{},{width:"40%"}),Object(le.a)(Object(le.a)({title:"Status",dataIndex:"status",key:"status",sorter:{compare:function(e,t){return e.status.localeCompare(t.status)}}},(t="status",a=[{label:"Opportunity",value:"Opportunity"},{label:"In-progress",value:"In-progress"},{label:"Closed",value:"Closed"},{label:"Canceled",value:"Canceled"}],{filterDropdown:function(e){var n=e.setSelectedKeys,c=e.selectedKeys,r=e.confirm,s=e.clearFilters;return Object(_e.jsx)("div",{className:"list_utils",children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsx)(ne.a,{span:24,children:Object(_e.jsx)(Oe.a.Group,{options:a,onChange:function(e){n(e),Se=e},value:Se})}),Object(_e.jsx)(ne.a,{span:12,children:Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){return Te(c,r,t)},icon:Object(_e.jsx)(xe.a,{}),children:"Filtrer"})}),Object(_e.jsx)(ne.a,{span:12,children:Object(_e.jsx)(ee.a,{onClick:function(){Ne(s),Se=[]},children:"R\xe9initialiser"})})]})})},onFilter:function(e,a){return a[t]?a[t].toString().toLowerCase().includes(e.toLowerCase()):""},filterIcon:function(e){return e?Object(_e.jsx)(ge.a,{style:{color:"#5EC2D7",fontSize:"1.7em"}}):Object(_e.jsx)(ye.a,{style:{color:void 0,fontSize:"1.7em"}})}})),{},{width:"20%",render:function(e){return Object(_e.jsxs)("span",{children:[Object(_e.jsx)(Je,{status:e}),"\xa0\xa0 ",e]})}})]),(s||o)&&d.push({dataIndex:"contract_id",key:"contract_id",width:"5%",render:function(e,t){return Object(_e.jsxs)(_e.Fragment,{children:[o&&Object(_e.jsx)(ee.a,{onClick:function(){return window.open("/contracts/".concat(e),"_blank").focus},children:Object(_e.jsx)(be.a,{})},Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)),s&&Object(_e.jsx)(ee.a,{onClick:function(){return i(t)},children:Object(_e.jsx)(pe.a,{})},Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5))]})}}),Object(_e.jsx)(ae.a,{children:Object(_e.jsx)(ne.a,{span:24,children:Object(_e.jsx)(ie.a,{rowKey:"contract_id",columns:d,dataSource:n,pagination:{showSizeChanger:!1,showQuickJumper:!0,pageSize:r||10,hideOnSinglePage:!0},loading:c})})})}var He=Object(s.b)((function(e){return{loading:e.loading,documents:e.documents,contracts:e.contracts,loadingDatabase:e.loadingDatabase,documentsTypes:e.metadata.documentsTypes}}),{addBreadcrumb:b,update:y,setLoading:m,setNavbar:f,setLoadingDatabase:O})((function(e){var t=e.loading,a=e.documents,c=e.contracts,r=e.loadingDatabase,o=e.documentsTypes,d=Object(s.c)(),l=Object(n.useState)([]),u=Object(Z.a)(l,2),j=u[0],p=u[1],h=Object(n.useState)(!1),x=Object(Z.a)(h,2),g=x[0],v=x[1],_=Object(n.useState)(void 0),k=Object(Z.a)(_,2),w=k[0],C=k[1];function S(e){var t;(t=e.target.value,new Promise((function(e,a){fetch("".concat("https://agd-api.bial-x.com/v1/","search?keywords=").concat(t)).then((function(e){if(200!==e.status)throw new Error("Erreur lors de la r\xe9cup\xe9ration en base");return e.json()})).then((function(t){e(t)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))).then((function(e){p(e)})).catch((function(e){C(e.message)}))}return Object(n.useEffect)((function(){d(f("")),d(b({reset:!0,data:[{name:"Accueil",href:"/"}]}))}),[d]),Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"Home Page"})}),Object(_e.jsxs)(Q.b,{style:{paddingLeft:"10px"},children:[Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){d(m(!0)),d(Y())},className:"classic-button",loading:t,children:"Actualiser"}),Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){Object(i.c)("/documents/create")},className:"classic-button",loading:t,children:"Nouveau document"})]}),Object(_e.jsx)(Q.b,{style:{paddingRight:"10px",float:"right"},children:Object(_e.jsx)(ee.a,{type:"ghost",onClick:function(){d(O(!0)),d(y()),te.b.warning("L'actualisation de la base de donn\xe9es peut prendre plusieurs minutes.")},className:"classic-button",loading:r,children:"Actualiser les donn\xe9es en base"})}),Object(_e.jsx)(ae.a,{style:{marginTop:"10px"},children:Object(_e.jsx)(ne.a,{span:24,style:{paddingLeft:"10px",paddingRight:"10px"},children:Object(_e.jsxs)(ce.a,{title:"Rechercher document ou affaire",children:[Object(_e.jsx)(re.a,{placeholder:"Exemple : Orsys",onChange:function(e){v(""!==e.target.value),S(e)}}),g&&Object(_e.jsxs)("div",{children:[Object(_e.jsx)(se.a,{}),Object(_e.jsx)(ie.a,{columns:[{title:"Type",dataIndex:"name",key:"name",render:function(e,t){return t.document_id?"Document":"Affaire"}},{title:"Nom",dataIndex:"contract_name",key:"contract_name",width:"75%",render:function(e,t){return t.document_id?Object(_e.jsx)(i.a,{to:"/documents/".concat(t.document_id),children:t.name}):Object(_e.jsx)(i.a,{to:"/contracts/".concat(t.contract_id),children:t.title})}}],dataSource:j,locale:{emptyText:w?Object(_e.jsx)(oe.a,{image:oe.a.PRESENTED_IMAGE_SIMPLE,description:w}):Object(_e.jsx)(oe.a,{image:oe.a.PRESENTED_IMAGE_SIMPLE,description:"la recherche n'a rien donn\xe9"})}})]})]})})}),Object(_e.jsxs)(ae.a,{style:{marginTop:"20px"},children:[Object(_e.jsx)(ne.a,{lg:{span:24},xl:{span:12},style:{paddingLeft:"10px",paddingRight:"10px"},children:Object(_e.jsx)(ce.a,{title:"Les 5 dernieres affaires dans Fitnet",children:Object(_e.jsx)(Ke,{contracts:c.data.sort((function(e,t){return parseInt(t.contract_id,10)-parseInt(e.contract_id,10)})).slice(0,5),loading:t,size:5})})}),Object(_e.jsx)(ne.a,{lg:{span:24},xl:{span:12},style:{paddingLeft:"10px",paddingRight:"10px"},children:Object(_e.jsx)(ce.a,{title:"Les 5 derniers documents cr\xe9\xe9s",children:Object(_e.jsx)(Ue,{documents:a.data.sort((function(e,t){return t.date.trim().localeCompare(e.date.trim())})).slice(0,5),loading:t,size:5,documentsTypes:o})})})]})]})})),Xe=a(36),We=a(301),$e=a(296),Ze=a(115),Qe=a(294),et=a(309),tt=function(e){return e.trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")},at=function(e,t){return!!e&&(!t||""===t||tt(e).includes(tt(t)))},nt=function(e,t){var a=!0;return t&&t.length>0&&(e?t.map((function(t){e.includes(t)||(a=!1)})):a=!1),a},ct=function(e,t){return!(t&&t.length>0)||je()(e).isBetween(t[0],t[1],"day","[]")};function rt(e){var t=e.isDocument,a=e.OnFilter,c=e.loading,r=e.metadata,s=e.style,i=e.dataFilter,o=e.filter,d=e.OnReset,l=e.keywords,u=Object(n.useState)(!0),j=Object(Z.a)(u,2),b=j[0],p=j[1],m=Object(n.useState)(void 0!==o),h=Object(Z.a)(m,2),O=h[0],x=h[1],f=Object(n.useState)([]),g=Object(Z.a)(f,2),y=g[0],v=g[1],_=$e.a.useForm(),k=Object(Z.a)(_,1)[0],w=Object(n.useState)([]),C=Object(Z.a)(w,2),S=C[0],T=C[1],N=Ze.a.Option,I=Qe.a.RangePicker,E=o||{};return Object(n.useEffect)((function(){if(r){var e=[];Object.keys(r).map((function(t){"documentsTypes"!==t&&r[t].map((function(t){return e.push(t)}))})),T(e.sort((function(e,t){return e.value.trim().localeCompare(t.value.trim())})))}}),[r]),Object(_e.jsxs)("div",{style:s,children:[Object(_e.jsxs)(Q.b,{children:[Object(_e.jsx)(ee.a,{type:"primary",className:"classic-button",ghost:b,icon:b?Object(_e.jsx)(ye.a,{}):Object(_e.jsx)(ge.a,{}),onClick:function(){p(!b)},style:{width:"180px"},children:b?" Montrer les filtres":"Cacher les filtres"}),Object(_e.jsx)(ee.a,{type:"primary",className:"classic-button",icon:Object(_e.jsx)(et.a,{}),onClick:function(){d(),v([]),x(!1),a(void 0),setTimeout((function(){k.resetFields()}),5)},disabled:!O,children:"R\xe9initialiser les filtres"})]}),!b&&Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)(ce.a,{title:Object(_e.jsx)("span",{style:{color:"var(--dia-blue)",paddingLeft:10},children:"Filtres"}),children:[Object(_e.jsx)($e.a,{labelCol:{span:24},wrapperCol:{span:24},labelAlign:"left",form:k,onFinish:function(e){a(Object(le.a)(Object(le.a)({},e),{},{tags:y}))},onValuesChange:function(){return x(!0)},initialValues:void 0,children:t?Object(_e.jsx)(_e.Fragment,{children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"contract_name",label:"Par nom d'affaire",initialValue:E.contract_name,children:Object(_e.jsx)(re.a,{})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"name",label:"Par nom de document",initialValue:E.name,children:Object(_e.jsx)(re.a,{})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"domain",label:"Par domaine",initialValue:E.domain,children:Object(_e.jsxs)(Ze.a,{showSearch:!0,allowClear:!0,children:[Object(_e.jsx)(N,{value:"C",children:"Client"}),Object(_e.jsx)(N,{value:"F",children:"Fournisseur"}),Object(_e.jsx)(N,{value:"P",children:"Partenaire"})]})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"type",label:"Par type de document",initialValue:E.type,children:Object(_e.jsx)(Ze.a,{showSearch:!0,allowClear:!0,filterOption:function(e,t){return tt(r.documentsTypes.find((function(e){return e.document_type_id===t.value})).value).includes(tt(e))},children:r&&r.documentsTypes&&r.documentsTypes.map((function(e){return Object(_e.jsx)(N,{value:e.document_type_id,children:e.value})}))})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"date",label:"Par date du document",initialValue:E.date,children:Object(_e.jsx)(I,{format:Ve,style:{width:"100%"}})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"creationDate",label:"Par date de cr\xe9ation",initialValue:E.creationDate,children:Object(_e.jsx)(I,{format:Ve,style:{width:"100%"}})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"customer",label:"Par client",initialValue:E.customer,children:Object(_e.jsx)(re.a,{})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"extension",label:"Par extension",initialValue:E.extension,children:Object(_e.jsxs)(Ze.a,{showSearch:!0,allowClear:!0,children:[Object(_e.jsx)(N,{value:"docx",children:"docx"}),Object(_e.jsx)(N,{value:"xlsx",children:"xlsx"}),Object(_e.jsx)(N,{value:"pptx",children:"pptx"}),Object(_e.jsx)(N,{value:"pdf",children:"pdf"})]})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"metadata",label:"Par metadata",initialValue:E.metadata,children:Object(_e.jsx)(Ze.a,{mode:"multiple",filterOption:function(e,t){return tt(S.find((function(e){return e.metadata_id===t.value})).value).includes(tt(e))},children:S.map((function(e){return Object(_e.jsx)(N,{value:e.metadata_id,children:e.value})}))})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"keywords",label:"Par mot cl\xe9",initialValue:E.keywords,children:Object(_e.jsx)(Ze.a,{mode:"mutliple",showSearch:!0,allowClear:!0,children:l.map((function(e){return Object(_e.jsx)(N,{value:[e],children:e})}))})})})]})}):Object(_e.jsx)(_e.Fragment,{children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"contract_id",label:"Par ID d'affaire",initialValue:E.contract_id,children:Object(_e.jsx)(re.a,{})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"company",label:"Par entreprise",initialValue:E.company,children:Object(_e.jsx)(Ze.a,{showSearch:!0,allowClear:!0,children:i.company.map((function(e){return Object(_e.jsx)(N,{value:e,children:e})}))})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"date",label:"Par date",initialValue:E.date,children:Object(_e.jsx)(I,{format:Ve,style:{width:"100%"}})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"affected_commercials",label:"Par commerciaux affect\xe9s",initialValue:E.affected_commercials,children:Object(_e.jsx)(Ze.a,{mode:"multiple",filterOption:function(e,t){return tt(i.commercials.find((function(e){return e.employeeId===t.value})).fullName).includes(tt(e))},children:i.commercials.map((function(e){return Object(_e.jsx)(N,{value:e.employeeId,children:e.fullName})}))})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"affected_project_managers",label:"Par chefs de projet affect\xe9s",initialValue:E.affected_project_managers,children:Object(_e.jsx)(Ze.a,{mode:"multiple",filterOption:function(e,t){return tt(t.value).includes(tt(e))},children:i.projectManagers.map((function(e){return Object(_e.jsx)(N,{value:e.fullName,children:e.fullName})}))})})}),Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{name:"creator",label:"Par cr\xe9ateur",initialValue:E.creator,children:Object(_e.jsx)(Ze.a,{showSearch:!0,allowClear:!0,children:i.creator.map((function(e){return Object(_e.jsx)(N,{value:e,children:e})}))})})})]})})}),Object(_e.jsx)(ee.a,{style:{marginLeft:"10px"},loading:c,type:"primary",icon:Object(_e.jsx)(ge.a,{}),onClick:function(){k.submit()},disabled:!O,children:"Filtrer"})]}),Object(_e.jsx)(se.a,{})]})]})}var st=function(e,t,a){var n="";n+="contract_id;contract_name;name;domain;type;year;date;version;sequentialNumber;extension;projectName;creator;creationDate;summary;metadata;keywords;document_id\n",e.map((function(e){n+='"'.concat(e.contract_id,'";'),n+='"'.concat(e.contract_name,'";'),n+='"'.concat(e.name,'";'),n+='"'.concat(e.domain,'";'),n+='"'.concat(Me(t,e.type),'";'),n+="".concat(e.year,";"),n+='"'.concat(e.date,'";'),n+='"'.concat(e.version,'";'),n+="".concat(e.sequentialNumber,";"),n+='"'.concat(e.extension,'";'),n+='"'.concat(e.projectName,'";'),n+='"'.concat(e.creator,'";'),n+='"'.concat(e.creationDate,'";'),n+='"'.concat(e.summary,'";'),n+="[".concat(function(e,t){console.log(e,t);var a=[];return Object.keys(t).map((function(n){return t[n].map((function(t){e.includes(t.metadata_id)&&a.push(t.value)}))})),console.log(a),a}(e.metadata,a),"];"),n+="[".concat(e.keywords,"];"),n+='"'.concat(e.document_id,'"\n')}));var c=new Uint8Array([239,187,191]),r=new Blob([c,n],{encoding:"UTF-8",type:"text/csv;charset=UTF-8"});if(navigator.msSaveBlob)navigator.msSaveBlob(r,"documents.csv");else{var s=document.createElement("a");if(void 0!==s.download){var i=URL.createObjectURL(r);s.setAttribute("href",i),s.setAttribute("download","documents.csv"),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}};var it=Object(s.b)((function(e){return{contracts:e.contracts,loading:e.loading,loadingDatabase:e.loadingDatabase,filter:e.filter.contract,keywords:e.keywords}}),{addBreadcrumb:b,setLoading:m,setNavbar:f,setLoadingDatabase:O,updateAllContracts:k,updateFilterContract:J})((function(e){var t=e.loading,a=e.contracts,c=e.loadingDatabase,r=e.filter,i=Object(s.c)(),o=Object(n.useState)([]),d=Object(Z.a)(o,2),l=d[0],u=d[1];return Object(n.useEffect)((function(){i(f("contracts")),i(b({reset:!0,data:[{name:"Affaires",href:"/contracts"}]}))}),[i]),Object(n.useEffect)((function(){if(a.data&&r){var e=[];r.affected_project_managers&&r.affected_project_managers.map((function(t){return e.push(Object(Xe.a)(a.filter.projectManagers.find((function(e){return e.fullName===t})).employeeId))})),u(a.data.filter((function(t){return at(Re(t.title,""),r.contract_id)&&at(t.company,r.company)&&function(e,t,a){var n=!0,c=[];return e&&e.map((function(e){return c.push(e[a])})),t&&t.length>0&&(c?t.map((function(e){c.includes(e)||(n=!1)})):n=!1),n}(t.affected_commercials,r.affected_commercials,"employeeId")&&function(e,t,a,n){var c=!0,r=[];return e&&e.map((function(e){return r.push(e[a])})),t&&t.length>0&&(r?n.map((function(e){var t=!1;e.map((function(e){r.includes(e)&&(t=!0)})),!1===t&&(c=!1)})):c=!1),c}(t.affected_project_managers,r.affected_project_managers,"employeeId",e)&&at(t.creator,r.creator)&&(a=t.begin_date,n=t.end_date,!((c=r.date)&&c.length>0)||je()(a).isBetween(c[0],c[1],"day","[]")||je()(n).isBetween(c[0],c[1],"day","[]"));var a,n,c})))}else u(a.data)}),[r,a]),Object(_e.jsxs)("div",{className:"contracts-page",children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"Affaires"})}),Object(_e.jsx)(Q.b,{style:{marginLeft:"10px"},children:Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){!function(e){var t="";t+="contract_id;title;customer_name;affected_commercials;affected_project_managers;company;begin_date;end_date;billing_date;status;creator\n",e.map((function(e){if(t+='"'.concat(e.contract_id,'";'),t+='"'.concat(e.title,'";'),t+='"'.concat(e.customer_name,'";'),e.affected_commercials.length>0){var a="";e.affected_commercials.map((function(e){a+="".concat(e.fullName,",")})),t+="[".concat(a.slice(0,-1),"];")}else t+="[];";if(null!=e.affected_project_managers&&e.affected_project_managers.length>0){var n="";e.affected_project_managers.map((function(e){n+="".concat(e.fullName,",")})),t+="[".concat(n.slice(0,-1),"];")}else t+="[];";t+='"'.concat(e.company,'";'),t+='"'.concat(e.begin_date,'";'),t+='"'.concat(e.end_date,'";'),t+='"'.concat(e.billing_date,'";'),t+='"'.concat(e.status,'";'),t+='"'.concat(e.creator,'"\n')}));var a=new Uint8Array([239,187,191]),n=new Blob([a,t],{encoding:"UTF-8",type:"text/csv;charset=UTF-8"});if(navigator.msSaveBlob)navigator.msSaveBlob(n,"affaires.csv");else{var c=document.createElement("a");if(void 0!==c.download){var r=URL.createObjectURL(n);c.setAttribute("href",r),c.setAttribute("download","affaires.csv"),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}}(a.data)},className:"classic-button",loading:t,children:"Exporter les affaires"})}),Object(_e.jsxs)(Q.b,{style:{paddingRight:"10px",float:"right"},children:[Object(_e.jsx)(ee.a,{onClick:function(){i(m(!0)),i(k())},className:"classic-button",loading:t,children:"Actualiser les affaires"}),Object(_e.jsx)(ee.a,{onClick:function(){i(O(!0)),i(y()),te.b.warning("L'actualisation de la base de donn\xe9es peut prendre plusieurs minutes.")},className:"classic-button",loading:c,children:"Actualiser les donn\xe9es en base"})]}),Object(_e.jsx)(se.a,{}),Object(_e.jsx)(rt,{OnFilter:function(e){return i(J(e))},loading:t,style:{marginLeft:"10px"},dataFilter:a.filter,filter:r,OnReset:function(){return i(J(void 0))}}),Object(_e.jsx)(ae.a,{style:{marginLeft:"10px",marginTop:"10px"},children:Object(_e.jsx)(ne.a,{span:24,children:Object(_e.jsx)(Ke,{contracts:l,loading:t,size:12})})}),""!==a.error&&Object(_e.jsx)(We.a,{style:{marginTop:"10px"},message:"Erreur de chargement des donn\xe9es",description:a.error,type:"error"})]})}));var ot=Object(s.b)((function(e){return{documents:e.documents,loading:e.loading,loadingDatabase:e.loadingDatabase,metadata:Object(le.a)(Object(le.a)({},e.metadata.others),{},{documentsTypes:e.metadata.documentsTypes}),documentTypes:e.metadata.documentsTypes,filter:e.filter.document,keywords:e.keywords.data}}),{addBreadcrumb:b,update:y,setLoading:m,deleteDocument:q,setNavbar:f,setLoadingDatabase:O,updateAllDocuments:R,updateAllMetadata:C,updateFilterDocument:H})((function(e){var t=e.documents,a=e.loading,c=e.loadingDatabase,r=e.metadata,o=e.filter,d=e.documentTypes,l=e.keywords,u=Object(s.c)(),j=Object(n.useState)([]),p=Object(Z.a)(j,2),h=p[0],x=p[1];return Object(n.useEffect)((function(){u(f("documents")),u(b({reset:!0,data:[{name:"Documents",href:"/documents"}]}))}),[u]),Object(n.useEffect)((function(){t.data&&o?x(t.data.filter((function(e){return at(e.contract_name,o.contract_name)&&at(e.name,o.name)&&at(e.domain,o.domain)&&at(e.type,o.type)&&ct(e.date,o.date)&&ct(e.creationDate,o.creationDate)&&at(e.extension,o.extension)&&nt(e.keywords,o.keywords)&&nt(e.metadata,o.metadata)&&at(e.customer,o.customer)}))):x(t.data)}),[o,t]),Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"Documents"})}),Object(_e.jsxs)(Q.b,{style:{paddingLeft:10},children:[Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){st(t.data,d,r)},className:"classic-button",loading:a,children:"Exporter les documents"}),Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){Object(i.c)("/documents/create")},className:"classic-button",loading:a,children:"Nouveau"})]}),Object(_e.jsxs)(Q.b,{style:{paddingRight:"10px",float:"right"},children:[Object(_e.jsx)(ee.a,{onClick:function(){u(m(!0)),u(R())},className:"classic-button",loading:a,children:"Actualiser les documents"}),Object(_e.jsx)(ee.a,{onClick:function(){u(m(!0)),u(C())},className:"classic-button",loading:a,children:"Actualiser les metadata"}),Object(_e.jsx)(ee.a,{onClick:function(){u(O(!0)),u(y()),te.b.warning("L'actualisation de la base de donn\xe9es peut prendre plusieurs minutes.")},className:"classic-button",loading:c,children:"Actualiser les donn\xe9es en base"})]}),Object(_e.jsx)(se.a,{}),Object(_e.jsx)(rt,{isDocument:!0,OnFilter:function(e){return u(H(e))},loading:a,metadata:r,style:{marginLeft:"10px"},filter:o,OnReset:function(){return u(H(void 0))},keywords:l}),Object(_e.jsx)(ae.a,{style:{marginLeft:"10px",marginTop:"10px"},children:Object(_e.jsx)(ne.a,{span:24,children:Object(_e.jsx)(Ue,{documents:h,size:12,loading:a,documentsTypes:d})})}),""!==t.error&&Object(_e.jsx)(We.a,{style:{marginTop:"10px"},message:"Erreur de chargement des donn\xe9es",description:t.error,type:"error"})]})}));var dt=function(){return Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"Not Found Page"})}),Object(_e.jsx)("h1",{children:"Ooops, route not found."})]})},lt=a(302),ut=a(304),jt=a(310),bt=a(149),pt=a(98),mt=a(190);function ht(e){var t=e.data;return t&&t.length>0?t.map((function(e){return Object(_e.jsx)(mt.a,{children:e},Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10))})):Object(_e.jsx)("span",{children:Object(_e.jsx)("i",{children:"Vide pour le moment"})})}var Ot=a.p+"static/media/Icon-Bial-R.b5ccc2da.png",xt=a.p+"static/media/Icon-Bial-X_2019.4be5fa8c.png",ft=function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","contracts/").concat(e)).then((function(e){if(200!==e.status)throw new Error("Le contrat n'existe pas ou plus");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))},gt=function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","metadata"),{method:"POST",body:JSON.stringify(e)}).then((function(e){if(201!==e.status)throw new Error("La metadata n'as pas \xe9t\xe9 ins\xe9r\xe9e");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))};var yt=Object(s.b)((function(e){return{loading:e.loading,documentsTypes:e.metadata.documentsTypes,metadata:e.metadata.others}}),{addBreadcrumb:b,setLoading:m,setNavbar:f,setMetadatasFromDocuments:$})((function(e){var t=e.id,a=e.loading,c=e.documentsTypes,r=e.metadata,o=Object(s.c)(),d=Object(n.useState)(null),l=Object(Z.a)(d,2),u=l[0],j=l[1],p=Object(n.useState)(""),h=Object(Z.a)(p,2),O=h[0],x=h[1],g=Object(n.useState)([]),y=Object(Z.a)(g,2),v=y[0],_=y[1],k=qe(u?u.metadata:[],r);return Object(n.useEffect)((function(){o(f("contracts")),o(m(!0)),function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","documents/byContract/").concat(e)).then((function(e){if(200!==e.status)throw new Error("Le contrat n'existe pas ou plus");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))}(t).then((function(e){return _(e),ft(t)})).then((function(e){j(e),o(b({reset:!0,data:[{name:"Affaires",href:"/contracts"},{name:e.title.split("-")[0].split("_")[0],href:"/contracts/".concat(e.contract_id)}]})),o(m(!1))})).catch((function(e){x(e.message),o(m(!1))}))}),[o,t]),a?Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"loading..."})}),Object(_e.jsx)(jt.a,{spin:!0,style:{fontSize:"20px"}})]}):""===O&&u?Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:u.title})}),Object(_e.jsxs)("div",{className:"contract-detail",children:[Object(_e.jsxs)(ae.a,{children:[Object(_e.jsxs)(ne.a,{xs:24,children:[Object(_e.jsxs)("h1",{className:"titre",children:["BIAL-X"===u.company?Object(_e.jsx)("img",{className:"logo-contract-detail",src:xt,alt:"logo-bial-r"}):Object(_e.jsx)("img",{className:"logo-contract-detail",src:Ot,alt:"logo-bial-x"}),u.title]}),Object(_e.jsx)(se.a,{})]}),Object(_e.jsxs)(Q.b,{style:{paddingLeft:10},children:[Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){Object(i.c)("/contracts")},className:"classic-button",loading:a,children:"Retour"}),Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){Object(i.c)("/documents/create-for-contract/".concat(u.contract_id))},className:"classic-button",loading:a,children:"Cr\xe9er un document"}),Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){o($(u.contract_id))},className:"classic-button",loading:a,children:"Importer les m\xe9tadatas"})]})]}),Object(_e.jsxs)(ae.a,{children:[Object(_e.jsx)(ne.a,{xs:{span:24},lg:{span:12},style:{padding:10},children:Object(_e.jsxs)(ce.a,{title:"Informations g\xe9n\xe9rales",children:[Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Client "}),": ",u.customer_name]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Createur "}),": ",u.creator]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Statut "}),": ",u.status," ",Object(_e.jsx)(Je,{status:u.status})]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Jours effectu\xe9s "}),": ",u.total_days?u.total_days:0]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Vente totale "}),": ",u.total_charges?u.total_charges:0]})]})}),Object(_e.jsx)(ne.a,{xs:{span:24},lg:{span:12},style:{padding:10},children:Object(_e.jsx)(ce.a,{title:"Dates importantes",children:Object(_e.jsxs)(lt.a,{children:[null===u.begin_date?Object(_e.jsx)(lt.a.Item,{dot:Object(_e.jsx)(bt.a,{style:{fontSize:"1.2em"}}),color:"red",children:Object(_e.jsx)("b",{children:"D\xe9but inconnue"})}):Object(_e.jsxs)(lt.a.Item,{dot:Object(_e.jsx)(pt.a,{style:{fontSize:"1.2em"}}),children:[Object(_e.jsx)("b",{children:"D\xe9but"})," : ",De(u.begin_date)]}),null===u.end_date?Object(_e.jsx)(lt.a.Item,{dot:Object(_e.jsx)(bt.a,{style:{fontSize:"1.2em"}}),color:"red",children:Object(_e.jsx)("b",{children:"Fin inconnue"})}):Object(_e.jsxs)(lt.a.Item,{dot:Object(_e.jsx)(pt.a,{style:{fontSize:"1.2em"}}),children:[Object(_e.jsx)("b",{children:"Fin"})," : ",De(u.end_date)]}),null===u.billing_date?Object(_e.jsx)(lt.a.Item,{dot:Object(_e.jsx)(bt.a,{style:{fontSize:"1.2em"}}),color:"red",children:Object(_e.jsx)("b",{children:"Paiement inconnue"})}):Object(_e.jsxs)(lt.a.Item,{dot:Object(_e.jsx)(pt.a,{style:{fontSize:"1.2em"}}),children:[Object(_e.jsx)("b",{children:"Paiement"})," : ",De(u.billing_date)]})]})})}),Object(_e.jsx)(ne.a,{xs:{span:24},md:{span:12},style:{padding:10},children:Object(_e.jsx)(ut.b,{header:Object(_e.jsx)("span",{children:"Commerciaux"}),bordered:!0,dataSource:u.affected_commercials&&0!==u.affected_commercials.length?u.affected_commercials:[{fullName:"Aucun commerciaux affect\xe9"}],renderItem:function(e){return Object(_e.jsx)(ut.b.Item,{children:e.fullName})}})}),Object(_e.jsx)(ne.a,{xs:{span:24},md:{span:12},style:{padding:10},children:Object(_e.jsx)(ut.b,{header:Object(_e.jsx)("span",{children:"Chefs de projet"}),bordered:!0,dataSource:u.affected_project_managers&&0!==u.affected_project_managers.length?u.affected_project_managers:[{fullName:"Aucun chef de projet affect\xe9"}],renderItem:function(e){return Object(_e.jsx)(ut.b.Item,{children:e.fullName})}})}),Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(ce.a,{title:"M\xe9tadonn\xe9es associ\xe9es ",children:Object(_e.jsx)(ae.a,{children:k&&Object.keys(k).map((function(e){return Object(_e.jsx)(ne.a,{xs:{span:24},md:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsxs)("p",{children:[Object(_e.jsxs)("b",{children:[e," "]}),": ",Object(_e.jsx)(ht,{data:k[e].list})]})})}))})})}),Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(Ue,{documents:v,title:"Documents associ\xe9s",size:12,loading:a,documentsTypes:c})})]})]})]}):Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"Erreur"})}),Object(_e.jsx)(We.a,{style:{marginTop:"10px"},message:"Erreur de chargement des donn\xe9es",description:Object(_e.jsxs)("div",{children:[Object(_e.jsx)("span",{children:"Impossible de r\xe9cuperer le contrat."}),Object(_e.jsx)("br",{}),Object(_e.jsxs)("span",{children:[Object(_e.jsx)("b",{children:"Message d'erreur : "}),O]})]}),type:"error"})]})})),vt=a(292),_t=a(64),kt=a(300),wt=a(17),Ct=a(140),St=a.n(Ct),Tt=a(311),Nt=a(312),It=a(313),Et=a.p+"static/media/logo.05dba466.png",At=vt.a.Header,Dt=vt.a.Footer,Lt=vt.a.Content;var Vt=Object(s.b)((function(e){return{breadcrumb:e.breadcrumb,loading:e.loading,loadingDatabase:e.loadingDatabase,updateTime:e.updateTime,navbar:e.navbar}}),{setLoading:m,setNavbar:f,initAll:Y})((function(e){var t=e.breadcrumb,a=e.loading,c=e.loadingDatabase,r=e.children,o=e.updateTime,d=e.navbar,l=Object(s.c)(),u=Object(n.useState)(!1),j=Object(Z.a)(u,2),b=j[0],p=j[1];return Object(n.useEffect)((function(){!c&&b&&(te.b.info("Mise \xe0 jour en base r\xe9ussi, nous mettons \xe0 jour les donn\xe9es locales"),l(m(!0)),l(Y()),p(!1)),c&&p(!0)}),[l,c,b]),Object(_e.jsxs)("div",{children:[Object(_e.jsxs)(vt.a,{className:"layout",children:[Object(_e.jsx)(At,{className:"header ant-layout-header-custom",children:Object(_e.jsxs)(ae.a,{type:"flex",justify:"space-between",align:"middle",children:[Object(_e.jsx)(ne.a,{xs:{span:11,offset:1},sm:{span:7,offset:7},md:{span:7,offset:6},lg:{span:8,offset:4},xl:{span:9,offset:4},children:Object(_e.jsx)("div",{className:"header-title",children:Object(_e.jsxs)(i.a,{className:"header-title_font_family",to:"/",onClick:function(){l(f(""))},children:["Gestion documentaire"," "]})})}),Object(_e.jsx)(ne.a,{xs:{span:12},sm:{span:10},md:{span:11},lg:{span:10},xl:{span:11},children:Object(_e.jsx)(ae.a,{type:"flex",justify:"end",children:Object(_e.jsxs)(_t.a,{mode:"horizontal",theme:"dark",className:"header-menu",selectedKeys:d,onSelect:function(e){l(f(e.key))},children:[Object(_e.jsx)(_t.a.Item,{children:Object(_e.jsxs)(i.a,{to:"/contracts",children:[Object(_e.jsx)(Tt.a,{style:{fontSize:"20px",margin:"0px",top:"3px",position:"relative"}}),"\xa0Affaires"]})},"contracts"),Object(_e.jsx)(_t.a.Item,{children:Object(_e.jsxs)(i.a,{to:"/documents",children:[Object(_e.jsx)(Nt.a,{style:{fontSize:"20px",margin:"0px",top:"3px",position:"relative"}}),"\xa0Documents"]})},"documents"),Object(_e.jsx)(_t.a.Item,{children:Object(_e.jsxs)(i.a,{to:"/metadata",children:[Object(_e.jsx)(It.a,{style:{fontSize:"20px",margin:"0px",top:"3px",position:"relative"}}),"\xa0Metadata"]})},"metadata")]})})})]})}),Object(_e.jsxs)(Lt,{children:[Object(_e.jsxs)(ae.a,{children:[Object(_e.jsx)(ne.a,{xs:{span:10,offset:1},sm:{span:12,offset:7},md:{span:13,offset:6},lg:{span:15,offset:4},xl:{span:15,offset:4},children:Object(_e.jsx)(kt.a,{style:{fontSize:"18px",marginTop:"15px",marginBottom:"15px"},children:t.map((function(e){return Object(_e.jsx)(kt.a.Item,{children:Object(_e.jsx)(i.a,{to:e.href,children:e.name})},e.name)}))})}),Object(_e.jsx)(ne.a,{span:5,children:c||a&&""===o?Object(_e.jsx)("div",{style:{marginTop:"15px",marginBottom:"15px",marginRight:"50px",textAlign:"right",display:"block"},children:Object(_e.jsx)(jt.a,{spin:!0})}):Object(_e.jsxs)("span",{style:{marginTop:"15px",marginBottom:"15px",marginRight:"50px",textAlign:"right",display:"block"},children:["M\xe0J: ",o||"Derni\xe8re MAJ inconnue"]})})]}),Object(_e.jsx)(wt.a,{locale:St.a,children:Object(_e.jsx)("div",{className:"site-layout-content",children:r})})]}),Object(_e.jsx)(Dt,{style:{textAlign:"center",background:"#f8f9f9",fontSize:"17px"},children:"\xa9 2021 Bial-X"})]}),Object(_e.jsx)(i.a,{to:"/",onClick:function(){l(f(""))},style:{height:"0em"},children:Object(_e.jsx)("img",{className:"logo",src:Et,alt:"logo-DIA"})})]})})),Rt=a(305),Pt=a(299),Ft=a(314),Mt=a(52),qt=a(315),Ut=a(194),zt=a(316);var Bt=Object(s.b)((function(e){return{metadata:e.metadata.others,documentsTypes:e.metadata.documentsTypes,error:e.metadata.error||"",loadingDatabase:e.loadingDatabase,loading:e.loading}}),{addBreadcrumb:b,setLoading:m,updateAllMetadata:C,setNavbar:f,updateMetadata:T,deleteMetadata:I,addMetadata:A,setLoadingDatabase:O,update:y})((function(e){var t=e.metadata,a=e.documentsTypes,c=e.error,r=e.loadingDatabase,i=e.loading,o=Object(s.c)(),d=Object(n.useState)(void 0),l=Object(Z.a)(d,2),u=l[0],j=l[1],p=Object(n.useState)(void 0),h=Object(Z.a)(p,2),x=h[0],g=h[1],v=Object(n.useState)(void 0),_=Object(Z.a)(v,2),k=_[0],w=_[1],S=Object(n.useState)(null),N=Object(Z.a)(S,2),E=N[0],V=N[1],R=Object(n.useState)(void 0),P=Object(Z.a)(R,2),F=P[0],M=P[1],q=Object(n.useState)(!1),U=Object(Z.a)(q,2),z=U[0],B=U[1],Y=Object(n.useState)(!1),G=Object(Z.a)(Y,2),J=G[0],K=G[1],H=$e.a.useForm(),X=Object(Z.a)(H,1)[0],W=$e.a.useForm(),$=Object(Z.a)(W,1)[0],se=$e.a.useForm(),oe=Object(Z.a)(se,1)[0],ue=Ze.a.Option,je=function(e){(function(e,t){return new Promise((function(a,n){fetch("".concat("https://agd-api.bial-x.com/v1/","metadata/update_group?group=").concat(e,"&newGroup=").concat(t),{method:"PUT"}).then((function(e){if(!e.ok)throw new Error("Le groupe n'as pas \xe9t\xe9 modifi\xe9");return e.json()})).then((function(e){a(e)})).catch((function(e){n(Error("An error has occured: ".concat(e.toString())))}))}))})(F,e).then((function(){o({type:D,payload:{group:F,newGroup:e}}),V(null),te.b.success("Modification r\xe9ussie"),M(void 0)})).catch((function(e){V(e.message),B(!1)}))},be=function(e){(function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","metadata/delete_group/").concat(e),{method:"DELETE"}).then((function(e){if(200!==e.status)throw new Error("Le groupe n'as pas \xe9t\xe9 supprim\xe9");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))})(e).then((function(){o({type:L,payload:{group:e}}),V(null),te.b.success("Suppression r\xe9ussie"),M(void 0)})).catch((function(e){V(e.message),B(!1)}))},me=function(e){"documentsTypes"===x.group?function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","documentsTypes/").concat(e),{method:"DELETE"}).then((function(e){if(200!==e.status)throw new Error("La metadata n'as pas \xe9t\xe9 supprim\xe9");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))}(e).then((function(){o(I({id:e})),V(null),te.b.success("Suppression r\xe9ussie")})).catch((function(e){V(e.message)})):function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","metadata/").concat(e),{method:"DELETE"}).then((function(e){if(200!==e.status)throw new Error("La metadata n'as pas \xe9t\xe9 supprim\xe9");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))}(e).then((function(){o(I({group:x.group,id:e})),V(null),te.b.success("Suppression r\xe9ussie")})).catch((function(e){V(e.message)})),g(void 0)};return Object(n.useEffect)((function(){o(f("metadata")),o(b({reset:!0,data:[{name:"Metadata",href:"/metadata"}]}))}),[o]),Object(_e.jsxs)("div",{className:"metadata",children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"Metadata"})}),Object(_e.jsx)(Pt.a,{title:"Param\xe8tre de ".concat(F),visible:void 0!==F,onCancel:function(){return M(void 0)},footer:[Object(_e.jsx)(ee.a,{onClick:function(){return M(void 0)},children:"Annuler"},"back"),Object(_e.jsx)(ee.a,{type:"primary",loading:i,onClick:function(){return $.submit()},children:"Sauvegarder"},"save"),Object(_e.jsx)(Rt.a,{content:Object(_e.jsxs)(Q.b,{style:{height:"100%",width:"100%",paddingBottom:"0px"},children:[Object(_e.jsx)(ee.a,{onClick:function(){return K(!1)},children:"Annuler"}),Object(_e.jsxs)(ee.a,{type:"primary",onClick:function(){be(F),K(!1)},children:["Supprimer ",Object(_e.jsx)(zt.a,{})]})]}),title:"Voulez-vous vraiment supprimer ?",trigger:"click",visible:J,onVisibleChange:function(e){e||K(!1)},children:Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){return K(!0)},children:"Supprimer"},"delete")})],children:Object(_e.jsx)($e.a,{onFinish:function(e){je(e.edit)},form:$,labelAlign:"left",children:Object(_e.jsx)($e.a.Item,{label:"Nouveau nom",name:"edit",initialValue:F,rules:[{required:!0,message:"Ne peut etre vide"}],children:Object(_e.jsx)(re.a,{})})})}),Object(_e.jsx)(Pt.a,{title:"Ajouter un nouveau type",visible:z,onCancel:function(){return B(!1)},footer:[Object(_e.jsx)(ee.a,{onClick:function(){return B(!1)},children:"Annuler"},"back"),Object(_e.jsx)(ee.a,{type:"primary",loading:i,onClick:function(){return oe.submit()},children:"Sauvegarder"},"save")],children:Object(_e.jsx)($e.a,{onFinish:function(e){var t;t=e.new,gt({group:t,value:"nouveau"}).then((function(e){o(A(e)),V(null),te.b.success("Ajout r\xe9ussie"),B(!1)})).catch((function(e){V(e.message),B(!1)}))},form:oe,labelAlign:"left",children:Object(_e.jsx)($e.a.Item,{label:"Nouveau nom",name:"new",initialValue:F,rules:[{required:!0,message:"Ne peut etre vide"}],children:Object(_e.jsx)(re.a,{})})})}),Object(_e.jsxs)(ae.a,{children:[Object(_e.jsxs)(ne.a,{span:24,style:{paddingLeft:"10px",paddingRight:"10px"},children:[Object(_e.jsx)(Q.b,{children:Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){B(!0)},className:"classic-button",loading:i,children:"Ajouter un nouveau type"})}),Object(_e.jsxs)(Q.b,{style:{float:"right"},children:[Object(_e.jsx)(ee.a,{onClick:function(){o(m(!0)),o(C())},className:"classic-button",loading:i,children:"Actualiser les metadata"}),Object(_e.jsx)(ee.a,{type:"ghost",onClick:function(){o(O(!0)),o(y()),te.b.warning("L'actualisation de la base de donn\xe9es peut prendre plusieurs minutes.")},className:"classic-button",loading:r,children:"Actualiser les donn\xe9es en base"})]})]}),Object(_e.jsx)(ne.a,{span:24,children:Object(_e.jsx)($e.a,{form:X,onFinish:function(e){k?"documentsTypes"===k?function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","documentsTypes"),{method:"POST",body:JSON.stringify(e)}).then((function(e){if(201!==e.status)throw new Error("La metadata n'as pas \xe9t\xe9 ins\xe9r\xe9e");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))}(Object(le.a)(Object(le.a)({},e),{},{isInVersion:"Version"===e.isInVersion})).then((function(e){o(A(e)),V(null),te.b.success("Ajout r\xe9ussie")})).catch((function(e){V(e.message)})):gt(Object(le.a)({group:k},e)).then((function(e){o(A(e)),V(null),te.b.success("Ajout r\xe9ussie")})).catch((function(e){V(e.message)})):"documentsTypes"===u.group?function(e,t){return new Promise((function(a,n){fetch("".concat("https://agd-api.bial-x.com/v1/","documentsTypes/").concat(e),{method:"PUT",body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("La metadata n'as pas \xe9t\xe9 modifi\xe9");return e.json()})).then((function(e){a(e)})).catch((function(e){n(Error("An error has occured: ".concat(e.toString())))}))}))}(u.document_type_id,Object(le.a)(Object(le.a)({},e),{},{isInVersion:"Version"===e.isInVersion})).then((function(e){o(T(e)),V(null),te.b.success("Modification r\xe9ussie")})).catch((function(e){V(e.message)})):function(e,t){return new Promise((function(a,n){fetch("".concat("https://agd-api.bial-x.com/v1/","metadata/").concat(e),{method:"PUT",body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("La metadata n'as pas \xe9t\xe9 modifi\xe9");return e.json()})).then((function(e){a(e)})).catch((function(e){n(Error("An error has occured: ".concat(e.toString())))}))}))}(u.metadata_id,Object(le.a)(Object(le.a)({},e),{},{group:u.group})).then((function(e){o(T(e)),V(null),te.b.success("Modification r\xe9ussie")})).catch((function(e){V(e.message)})),j(void 0),w(void 0)},children:Object(_e.jsxs)(ae.a,{children:[""!==c&&Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(We.a,{style:{marginTop:"10px"},message:"Erreur de r\xe9cup\xe9ration des m\xe9tadata",description:c,type:"error"})}),null!==E&&Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(We.a,{style:{marginTop:"10px"},message:"Erreur",description:E,type:"error"})}),Object(_e.jsx)(ne.a,{xs:{span:24},xl:{span:12},style:{padding:10},children:Object(_e.jsxs)(ce.a,{title:"Type de documents",children:[k&&"documentsTypes"===k&&Object(_e.jsxs)(ae.a,{children:[Object(_e.jsxs)(ne.a,{span:18,children:[Object(_e.jsx)($e.a.Item,{label:"Cl\xe9",name:"key",rules:[{required:!0}],initialValue:"NEW",style:{margin:"auto"},labelCol:{span:4},wrapperCol:{span:20},children:Object(_e.jsx)(re.a,{})}),Object(_e.jsx)($e.a.Item,{label:"Valeur",name:"value",rules:[{required:!0}],initialValue:"Nouveau",style:{margin:"auto"},labelCol:{span:4},wrapperCol:{span:20},children:Object(_e.jsx)(re.a,{})}),Object(_e.jsx)($e.a.Item,{label:"Type",name:"isInVersion",rules:[{required:!0}],initialValue:"Version",style:{margin:"auto"},labelCol:{span:4},wrapperCol:{span:20},children:Object(_e.jsxs)(Ze.a,{style:{width:"100%"},children:[Object(_e.jsx)(ue,{value:"Version",children:"Version"}),Object(_e.jsx)(ue,{value:"S\xe9quentiel",children:"S\xe9quentiel"})]})})]}),Object(_e.jsx)(ne.a,{span:6,children:Object(_e.jsx)("div",{style:{float:"right",paddingRight:"16px"},children:Object(_e.jsxs)(Q.b,{size:30,children:[Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){X.submit()},shape:"circle",children:Object(_e.jsx)(pe.a,{})}),Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){w(void 0)},shape:"circle",children:Object(_e.jsx)(Mt.a,{})})]})})})]}),Object(_e.jsx)(ie.a,{loading:i,rowKey:"document_type_id",columns:[Object(le.a)(Object(le.a)({title:"Cl\xe9",dataIndex:"key",key:"key",sorter:{compare:function(e,t){return e.key.localeCompare(t.key)}}},Ie("key","cl\xe9")),{},{render:function(e,t){return Object(_e.jsx)("div",{children:u&&"documentsTypes"===u.group&&u.document_type_id===t.document_type_id?Object(_e.jsx)($e.a.Item,{name:"key",rules:[{required:!0}],initialValue:e,style:{margin:"auto"},children:Object(_e.jsx)(re.a,{})}):Object(_e.jsx)("span",{children:e})})}}),Object(le.a)(Object(le.a)({title:"Valeur",dataIndex:"value",key:"value",sorter:{compare:function(e,t){return e.value.localeCompare(t.value)}}},Ie("value","Valeur")),{},{render:function(e,t){return Object(_e.jsx)("div",{children:u&&"documentsTypes"===u.group&&u.document_type_id===t.document_type_id?Object(_e.jsx)($e.a.Item,{name:"value",rules:[{required:!0}],initialValue:e,style:{margin:"auto"},children:Object(_e.jsx)(re.a,{})}):Object(_e.jsx)("span",{children:e})})}}),{title:"Type",dataIndex:"isInVersion",key:"isInVersion",sorter:{compare:function(e,t){return e.isInVersion.localeCompare(t.isInVersion)}},render:function(e,t){return Object(_e.jsx)("div",{children:u&&"documentsTypes"===u.group&&u.document_type_id===t.document_type_id?Object(_e.jsx)($e.a.Item,{name:"isInVersion",rules:[{required:!0}],initialValue:e,style:{margin:"auto"},children:Object(_e.jsxs)(Ze.a,{style:{width:120},children:[Object(_e.jsx)(ue,{value:"Version",children:"Version"}),Object(_e.jsx)(ue,{value:"S\xe9quentiel",children:"S\xe9quentiel"})]})}):Object(_e.jsx)("span",{children:e?"Version":"S\xe9quentiel"})})}},{width:"5%",dataIndex:"key",key:"key",render:function(e,t){return Object(_e.jsx)("div",{children:u&&"documentsTypes"===u.group&&u.document_type_id===t.document_type_id?Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){X.submit()},shape:"circle",children:Object(_e.jsx)(pe.a,{})}):Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){X.setFieldsValue({key:t.key,value:t.value,isInVersion:t.isInVersion?"Version":"S\xe9quentiel"}),j(t)},shape:"circle",disabled:u||k,children:Object(_e.jsx)(qt.a,{})})})}},{title:Object(_e.jsx)(ee.a,{type:"primary",className:"classic-round-button",onClick:function(){X.setFieldsValue({key:"New",value:"Nouveau",isInVersion:"Version"}),w("documentsTypes")},shape:"circle",disabled:u||k,children:Object(_e.jsx)(Ut.a,{})}),width:"5%",dataIndex:"key",key:"key",render:function(e,t){return Object(_e.jsx)("div",{children:u&&"documentsTypes"===u.group&&u.document_type_id===t.document_type_id?Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){j(void 0)},shape:"circle",children:Object(_e.jsx)(Mt.a,{})}):Object(_e.jsx)(Rt.a,{content:Object(_e.jsxs)(Q.b,{style:{height:"100%",width:"100%",paddingBottom:"0px"},children:[Object(_e.jsx)(ee.a,{onClick:function(){return g(void 0)},children:"Annuler"}),Object(_e.jsxs)(ee.a,{type:"primary",onClick:function(){return me(t.document_type_id)},children:["Supprimer ",Object(_e.jsx)(zt.a,{})]})]}),title:"Voulez-vous vraiment supprimer ?",trigger:"click",visible:!(!x||"documentsTypes"!==x.group||x.document_type_id!==t.document_type_id),onVisibleChange:function(e){e||g(void 0)},children:Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){g(t)},shape:"circle",disabled:u||k,children:Object(_e.jsx)(zt.a,{})})})})}}],dataSource:a})]})}),Object.keys(t).map((function(e){return Object(_e.jsx)(ne.a,{xs:{span:24},xl:{span:12},style:{padding:10},children:(a=t[e],n=e,c=e,Object(_e.jsxs)(ce.a,{title:c,extra:Object(_e.jsx)(_e.Fragment,{children:Object(_e.jsx)(ee.a,{type:"primary",className:"classic-round-button",onClick:function(){M(c)},shape:"circle",children:Object(_e.jsx)(Ft.a,{})})}),children:[k&&k===n&&Object(_e.jsxs)(ae.a,{children:[Object(_e.jsx)(ne.a,{span:18,children:Object(_e.jsx)($e.a.Item,{name:"value",rules:[{required:!0}],initialValue:"Nouveau",style:{margin:"auto"},children:Object(_e.jsx)(re.a,{})})}),Object(_e.jsx)(ne.a,{span:6,children:Object(_e.jsx)("div",{style:{float:"right",paddingRight:"16px"},children:Object(_e.jsxs)(Q.b,{size:30,children:[Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){X.submit()},shape:"circle",children:Object(_e.jsx)(pe.a,{})}),Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){w(void 0)},shape:"circle",children:Object(_e.jsx)(Mt.a,{})})]})})})]}),Object(_e.jsx)(ie.a,{loading:i,rowKey:"metadata_id",columns:[Object(le.a)(Object(le.a)({dataIndex:"value",key:"value",sorter:{compare:function(e,t){return e.value.localeCompare(t.value)}}},Ie("value",c)),{},{width:"100%",render:function(e,t){return Object(_e.jsx)("div",{children:u&&u.group===n&&u.metadata_id===t.metadata_id?Object(_e.jsx)($e.a.Item,{name:"value",rules:[{required:!0}],initialValue:e,style:{margin:"auto"},children:Object(_e.jsx)(re.a,{})}):Object(_e.jsx)("span",{children:e})})}}),{width:"5%",dataIndex:"value",key:"value",render:function(e,t){return Object(_e.jsx)("div",{children:u&&u.group===n&&u.metadata_id===t.metadata_id?Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){X.submit()},shape:"circle",children:Object(_e.jsx)(pe.a,{})}):Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){X.setFieldsValue({key:void 0,value:t.value,isInVersion:void 0}),j(t)},shape:"circle",disabled:u||k,children:Object(_e.jsx)(qt.a,{})})})}},{title:Object(_e.jsx)(ee.a,{type:"primary",className:"classic-round-button",onClick:function(){X.setFieldsValue({key:void 0,value:"Nouveau",isInVersion:void 0}),w(n)},shape:"circle",disabled:u||k,children:Object(_e.jsx)(Ut.a,{})}),width:"5%",dataIndex:"value",key:"value",render:function(e,t){return Object(_e.jsx)("div",{children:u&&u.group===n&&u.metadata_id===t.metadata_id?Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){j(void 0)},shape:"circle",children:Object(_e.jsx)(Mt.a,{})}):Object(_e.jsx)(Rt.a,{content:Object(_e.jsxs)(Q.b,{style:{height:"100%",width:"100%",paddingBottom:"0px"},children:[Object(_e.jsx)(ee.a,{onClick:function(){return g(void 0)},children:"Annuler"}),Object(_e.jsxs)(ee.a,{type:"primary",onClick:function(){return me(t.metadata_id)},children:["Supprimer ",Object(_e.jsx)(zt.a,{})]})]}),title:"Voulez-vous vraiment supprimer ?",trigger:"click",visible:!(!x||x.group!==n||x.metadata_id!==t.metadata_id),onVisibleChange:function(e){e||g(void 0)},children:Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){g(t)},shape:"circle",disabled:u||k,children:Object(_e.jsx)(zt.a,{})})})})}}],dataSource:a})]}))});var a,n,c}))]})})})]})]})}));a(287);function Yt(e){var t=e.data,a=e.onUpdateData,c=Object(n.useState)(!1),r=Object(Z.a)(c,2),s=r[0],i=r[1],o=Object(n.useState)(""),d=Object(Z.a)(o,2),l=d[0],u=d[1];return Object(_e.jsxs)("div",{className:"editable-tag-list",children:[t.map((function(e){return Object(_e.jsxs)(mt.a,{children:[Object(_e.jsx)("span",{onClick:function(){u(e),a(Object(Xe.a)(t).filter((function(t){return t!==e}))),i(!0)},children:e}),Object(_e.jsx)(Mt.a,{onClick:function(){return a(t.filter((function(t){return t!==e})))}})]},e)})),Object(_e.jsxs)(mt.a,{style:{backgroundColor:"var(--dia-blue)",borderColor:"var(--dia-blue)",color:"white"},onClick:function(){u(""),i(!0)},children:[Object(_e.jsx)("span",{children:"Nouveau"}),Object(_e.jsx)(Ut.a,{})]},"NewTag"),!0===s&&Object(_e.jsx)(re.a,{defaultValue:l,onChange:function(e){return u(e.target.value)},onPressEnter:function(){""!==l&&a([].concat(Object(Xe.a)(t),[l])),i(!1)},onBlur:function(){""!==l&&a([].concat(Object(Xe.a)(t),[l])),i(!1)},ref:function(e){return e&&e.focus()},addonAfter:Object(_e.jsxs)(ee.a,{type:"primary",style:{width:"100%",padding:"0"},children:["   ",Object(_e.jsx)(pe.a,{}),"   "]})})]})}je.a.locale("fr");var Gt=Object(s.b)((function(e){return{loading:e.loading,documentsTypes:e.metadata.documentsTypes,metadata:e.metadata.others}}),{addBreadcrumb:b,setLoading:m,update:y,setNavbar:f,updateDocument:z})((function(e){var t=e.id,a=e.loading,c=e.documentsTypes,r=e.metadata,o=Object(s.c)(),d=Object(n.useState)(!0),l=Object(Z.a)(d,2),u=l[0],j=l[1],p=Object(n.useState)(null),h=Object(Z.a)(p,2),O=h[0],x=h[1],g=Object(n.useState)(null),y=Object(Z.a)(g,2),v=y[0],_=y[1],k=Object(n.useState)(null),w=Object(Z.a)(k,2),C=w[0],S=w[1],T=Object(n.useState)(""),N=Object(Z.a)(T,2),I=N[0],E=N[1],A=Object(n.useState)(""),D=Object(Z.a)(A,2),L=D[0],V=D[1],R=Object(n.useState)([]),P=Object(Z.a)(R,2),F=P[0],M=P[1],U=Object(n.useState)(!1),B=Object(Z.a)(U,2),Y=B[0],G=B[1],J=$e.a.useForm(),K=Object(Z.a)(J,1)[0],H=Object(n.useState)([]),X=Object(Z.a)(H,2),W=X[0],$=X[1],ie=Ze.a.Option,oe=re.a.TextArea,ue=qe(v?v.metadata:[],r);return Object(n.useEffect)((function(){o(f("documents")),o(b({reset:!0,data:[{name:"Documents",href:"/documents"},{name:"creation",href:"/documents/create"}]})),"modify"===window.location.pathname.split("/")[2]&&G(!0),o(m(!0)),function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","documents/associated/").concat(e)).then((function(e){if(200!==e.status)throw new Error("Le document n'existe pas ou plus");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))}(t).then((function(e){return M(e),function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","documents/").concat(e)).then((function(e){if(200!==e.status)throw new Error("Le document n'existe pas ou plus");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))}(t)})).then((function(e){return _(e),$(e.keywords),o(b({reset:!0,data:[{name:"Documents",href:"/documents"},{name:e.name,href:"/documents/".concat(e.document_id)}]})),ft(e.contract_id)})).then((function(e){x(e),j(!1),o(m(!1))})).catch((function(e){E(e.message),j(!1),o(m(!1))}))}),[o,t]),!0===a||!0===u?Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"loading..."})}),Object(_e.jsx)(jt.a,{spin:!0,style:{fontSize:"20px"}})]}):""===I&&v&&O?Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:v.name})}),Object(_e.jsxs)("div",{className:"document-detail",children:[Object(_e.jsxs)(Q.b,{style:{paddingLeft:10},children:[Y?Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){Object(i.c)("/documents/".concat(v.document_id))},className:"classic-button",loading:a,children:"Annuler"}):Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){Object(i.c)("/documents")},className:"classic-button",loading:a,children:"Retour"}),Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){Object(i.c)("/documents/modify/".concat(v.document_id))},className:"classic-button",loading:a,children:"Modifier"})]}),Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){S(!0)},className:"classic-button",loading:a,children:"Supprimer"}),Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){Object(i.c)("/documents/create-for-contract/".concat(v.contract_id))},className:"classic-button",loading:a,children:"Nouveau document pour ce contrat"})]}),Object(_e.jsxs)(ae.a,{children:[Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:8},style:{padding:10},children:Object(_e.jsx)(ce.a,{title:"Etape 1 : affaire s\xe9l\xe9ctionn\xe9e ",children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsxs)(ne.a,{xs:{span:12},lg:{span:24},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Titre "}),": ",Object(_e.jsx)(i.a,{to:"/contracts/".concat(O.contract_id),children:O.title})]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Client "}),": ",O.customer_name]})]}),Object(_e.jsxs)(ne.a,{xs:{span:12},lg:{span:24},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Cr\xe9ateur"})," : ",O.creator]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:" Statut "}),": ",O.status," ",Object(_e.jsx)(Je,{status:O.status})]})]})]})})}),Object(_e.jsx)(_e.Fragment,{children:Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:16},style:{padding:10},children:Object(_e.jsx)(ce.a,{title:"Etape 2 : autres crit\xe8res ",children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsxs)(ne.a,{xs:{span:24},md:{span:12},lg:{span:12},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Domaine"})," : ",v.domain]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Type de document"})," : ",Fe(c,v.type)]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Ann\xe9e"})," : ",v.year]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Date"})," : ",De(v.date)]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"URL"})," : ",v.url]})]}),Object(_e.jsxs)(ne.a,{xs:{span:24},md:{span:12},lg:{span:12},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Nom du projet "})," : ",v.projectName]}),Object(_e.jsx)("p",{children:v.isNew?"Premiere version d'un document":"Nouvelle version d'un document"}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:Pe(c,v.type)?"Num\xe9ro s\xe9quentiel : ":"Num\xe9ro de version : "}),Pe(c,v.type)?v.sequentialNumber:v.version]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Extension du document"})," : ",v.extension]})]})]})})})}),Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(ce.a,{title:"Etape 3 : nom g\xe9n\xe9r\xe9 ",children:Object(_e.jsx)("h3",{children:v.name})})}),Object(_e.jsx)(Pt.a,{title:"Suppression",visible:C,onOk:function(){(function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","documents/").concat(e)).then((function(e){if(200!==e.status)throw new Error("Le document n'as pas \xe9t\xe9 supprim\xe9");return e.json()})).then((function(){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))})(v.document_id).then((function(){o(q(v.document_id)),Object(i.c)("/documents")})).catch((function(e){V(e.message)})),S(null)},onCancel:function(){S(null)},okText:"Suppression",cancelText:"Annuler",children:Object(_e.jsx)("p",{children:"\xcates vous s\xfbr de vouloir supprimer ?"})}),Y?Object(_e.jsxs)("div",{className:"step4",children:[Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(ce.a,{title:"Etape 4 : m\xe9tadonn\xe9es associ\xe9es ",style:{width:"100%"},children:Object(_e.jsx)(wt.a,{locale:St.a,children:Object(_e.jsx)($e.a,{labelCol:{xs:{span:10},md:{span:12},lg:{span:8},xl:{span:7}},wrapperCol:{xs:{span:14},md:{span:12},lg:{span:16},xl:{span:17}},form:K,onFinish:function(e){var t=[];Object.keys(e.document.metadata).map((function(a){return e.document.metadata[a]&&t.push.apply(t,Object(Xe.a)(e.document.metadata[a]))}));var a=Object(le.a)(Object(le.a)(Object(le.a)({},v),e.document),{},{keywords:W,metadata:t});(function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","documents/").concat(e.document_id),{method:"PUT",body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("Le document n'as pas \xe9t\xe9 modifi\xe9");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))})(a).then((function(){o(z(a)),te.b.success("Modification r\xe9ussie"),Object(i.c)("/documents/".concat(v.document_id))})).catch((function(e){V(e.message)}))},children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsxs)(ne.a,{xs:{span:24},md:{span:12},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsx)($e.a.Item,{label:"Createur",name:["document","creator"],rules:[{required:!0,message:"Ne peut pas \xeatre vide"},function(){return{validator:function(e,t){return t.match(/^[A-Z]{3}$/)?Promise.resolve():Promise.reject(new Error("Un trigramme est requis"))}}}],initialValue:v.creator,children:Object(_e.jsx)(re.a,{})}),Object(_e.jsx)($e.a.Item,{label:"URL",name:["document","url"],rules:[{required:!0,message:"Ne peut pas \xeatre vide"}],initialValue:v.url,children:Object(_e.jsx)(re.a,{})})]}),Object(_e.jsx)(ne.a,{xs:{span:24},md:{span:12},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{label:"Date de cr\xe9ation",name:["document","creationDate"],initialValue:je()(v.creationDate),children:Object(_e.jsx)(Qe.a,{style:{width:"100%"},format:function(e){return je()(e).format("dddd DD MMMM YYYY")}})})}),r&&Object.keys(r).map((function(e){return Object(_e.jsx)(ne.a,{xs:{span:24},md:{span:12},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)($e.a.Item,{label:e,name:["document","metadata",e],initialValue:ue&&ue[e]?ue[e].idList:void 0,children:Object(_e.jsx)(Ze.a,{mode:"multiple",id:e,children:r[e].map((function(e){return Object(_e.jsx)(ie,{value:e.metadata_id,children:e.value})}))})})})})),Object(_e.jsxs)(ne.a,{span:24,style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsx)(se.a,{}),Object(_e.jsx)("div",{className:"left-form",children:Object(_e.jsx)($e.a.Item,{label:"Mots Cl\xe9",name:["document","keywords"],labelCol:24,wrapperCol:24,initialValue:v.keywords,children:Object(_e.jsx)(Yt,{data:W,onUpdateData:function(e){$(e)}})})})]}),Object(_e.jsx)(ne.a,{span:24,style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsx)("div",{className:"left-form",children:Object(_e.jsx)($e.a.Item,{label:"R\xe9sum\xe9 :",name:["document","summary"],labelCol:24,wrapperCol:24,initialValue:v.summary,children:Object(_e.jsx)(oe,{})})})}),Object(_e.jsxs)(Q.b,{style:{margin:"auto"},children:[Object(_e.jsx)(ee.a,{onClick:function(){Object(i.c)("/documents/".concat(v.document_id))},className:"classic-button",loading:a,children:"Annuler"}),Object(_e.jsx)(ee.a,{type:"primary",className:"classic-button",onClick:function(){return K.submit()},children:"Sauvegarder"})]})]})})})})}),""!==L&&Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(We.a,{style:{marginTop:"10px"},message:"Erreur de modification",description:Object(_e.jsxs)("div",{children:[Object(_e.jsx)("span",{children:"Impossible de modifier le document."}),Object(_e.jsx)("br",{}),Object(_e.jsxs)("span",{children:[Object(_e.jsx)("b",{children:"Message d'erreur : "}),L]})]}),type:"error"})})]}):Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(ce.a,{title:"Etape 4 : m\xe9tadonn\xe9es associ\xe9es ",children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsx)(ne.a,{xs:{span:24},md:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"URL "}),": ",v.url]})}),Object(_e.jsx)(ne.a,{xs:{span:24},md:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Cr\xe9ateur "}),": ",v.creator]})}),Object(_e.jsx)(ne.a,{xs:{span:24},md:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Date de cr\xe9ation "}),": ",De(v.creationDate)]})}),ue&&Object.keys(ue).map((function(e){return Object(_e.jsx)(ne.a,{xs:{span:24},md:{span:12},xl:{span:8},style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsxs)("p",{children:[Object(_e.jsxs)("b",{children:[e," "]}),": ",Object(_e.jsx)(ht,{data:ue[e].list})]})})})),Object(_e.jsx)(ne.a,{span:24,style:{paddingLeft:10,paddingRight:10},children:Object(_e.jsxs)("span",{children:[Object(_e.jsx)("b",{children:" Mot Cl\xe9 :"}),Object(_e.jsx)("p",{children:Object(_e.jsx)(ht,{data:v.keywords})})]})}),Object(_e.jsxs)(ne.a,{xs:{span:24},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsx)("b",{children:" R\xe9sum\xe9 :"}),Object(_e.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:v.summary||Object(_e.jsx)("i",{children:"Aucun r\xe9sum\xe9 pour le moment"})})]})]})})}),Object(_e.jsx)(ne.a,{span:24,style:{paddingLeft:10,paddingRight:10,paddingTop:10},children:Object(_e.jsx)(Ue,{documents:F,title:"Documents \xe9quivalents",size:12,documentsTypes:c})})]})]})]})]}):Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"Erreur"})}),Object(_e.jsx)(We.a,{style:{marginTop:"10px"},message:"Erreur de chargement des donn\xe9es",description:Object(_e.jsxs)("div",{children:[Object(_e.jsx)("span",{children:"Impossible de r\xe9cuperer le document."}),Object(_e.jsx)("br",{}),Object(_e.jsxs)("span",{children:[Object(_e.jsx)("b",{children:"Message d'erreur : "}),I]})]}),type:"error"})]})})),Jt=a(297),Kt=a(317);var Ht=Object(s.b)((function(e){return{loading:e.loading,documents:e.documents,documentsTypes:e.metadata.documentsTypes,contracts:e.contracts}}),{addBreadcrumb:b,setLoading:m,addDocument:F,update:y,setNavbar:f})((function(e){var t=e.id,a=e.loading,c=e.documents,r=e.documentsTypes,o=e.contracts,d=Ze.a.Option,l=Object(s.c)(),u=Object(n.useState)(!0),j=Object(Z.a)(u,2),p=j[0],h=j[1],O=Object(n.useState)(null),x=Object(Z.a)(O,2),g=x[0],y=x[1],v=Object(n.useState)(null),_=Object(Z.a)(v,2),k=_[0],w=_[1],C=Object(n.useState)(""),S=Object(Z.a)(C,2),T=S[0],N=S[1],I=Object(n.useState)(!1),E=Object(Z.a)(I,2),A=E[0],D=E[1],L=Object(n.useState)(!1),V=Object(Z.a)(L,2),R=V[0],P=V[1],M=Object(n.useState)(1),q=Object(Z.a)(M,2),U=q[0],z=q[1],B=$e.a.useForm(),Y=Object(Z.a)(B,1)[0],G=Object(n.useState)("new"),J=Object(Z.a)(G,2),K=J[0],H=J[1],X=Object(n.useState)(!0),W=Object(Z.a)(X,2),$=W[0],ie=W[1],oe=Object(n.useState)(null),ue=Object(Z.a)(oe,2),be=ue[0],pe=ue[1],me=Object(n.useState)(null),he=Object(Z.a)(me,2),Oe=he[0],xe=he[1],fe=Object(n.useState)(null),ge=Object(Z.a)(fe,2),ye=ge[0],ve=ge[1],ke=function(){var e=Object(le.a)(Object(le.a)(Object(le.a)({},{id:null,contract_id:null,contract_name:null,name:null,domain:null,type:null,year:null,date:null,version:null,sequentialNumber:null,extension:null,projectName:null,creator:"",creationDate:"2008-09-15T15:53:00+05:00",summary:"",metadata:[],keywords:[],isNew:!0}),{},{name:be},k),{},{contract_id:g.contract_id,contract_name:g.title,date:"".concat(k.date.format("YYYY-MM-DD"),"T00:00:00.000000+00:00"),creationDate:je()().format("YYYY-MM-DDTHH:mm:ss.000000+00:00"),year:parseInt(k.year,10)});(function(e){return new Promise((function(t,a){fetch("".concat("https://agd-api.bial-x.com/v1/","documents"),{method:"POST",body:e}).then((function(e){if(201!==e.status)throw new Error("Le document n'as pas \xe9t\xe9 ins\xe9r\xe9");return e.json()})).then((function(e){t(e)})).catch((function(e){a(Error("An error has occured: ".concat(e.toString())))}))}))})(JSON.stringify(e)).then((function(e){l(F(e)),te.b.success("Ajout r\xe9ussie"),Object(i.c)("/documents/modify/".concat(e.document_id))})).catch((function(e){xe(e.message)}))};return Object(n.useEffect)((function(){l(f("documents")),"create"===window.location.pathname.split("/")[2]?(z(1),h(!1)):"create-for-contract"===window.location.pathname.split("/")[2]&&(z(2),ft(t).then((function(e){y(e);var t=Re(e.title,null);ve(t),Y.setFieldsValue({document:Object(le.a)(Object(le.a)({},Y.getFieldValue.document),{},{projectName:e.title.split("-").slice(2).join("-")||e.title.split("-").slice(1).join("-")}),generatedId:t}),h(!1),l(m(!1))})).catch((function(e){N(e.message),h(!1),l(m(!1))})),l(b({reset:!0,data:[{name:"Documents",href:"/documents"},{name:"creation",href:"/documents/create"}]})))}),[l,Y,t]),!0===a||!0===p?Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"loading..."})}),Object(_e.jsx)(jt.a,{spin:!0,style:{fontSize:"20px"}})]}):""!==T?Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"Erreur"})}),Object(_e.jsx)(We.a,{style:{marginTop:"10px"},message:"Erreur de chargement des donn\xe9es",description:Object(_e.jsxs)("div",{children:[Object(_e.jsx)("span",{children:"Impossible de r\xe9cuperer le document."}),Object(_e.jsx)("br",{}),Object(_e.jsxs)("span",{children:[Object(_e.jsx)("b",{children:"Message d'erreur : "}),T]})]}),type:"error"})]}):Object(_e.jsxs)("div",{children:[Object(_e.jsx)(de.a,{children:Object(_e.jsx)("title",{children:"creation"})}),Object(_e.jsxs)("div",{className:"document-detail",children:[Object(_e.jsx)(Q.b,{style:{paddingLeft:10},children:Object(_e.jsx)(ee.a,{type:"primary",onClick:function(){Object(i.c)(-1)},className:"classic-button",loading:a,children:"Annuler"})}),Object(_e.jsx)($e.a,{labelCol:{xs:{span:10},md:{span:12},lg:{span:10}},wrapperCol:{xs:{span:14},md:{span:12},lg:{span:14}},form:Y,onFinish:function(e){pe(function(e,t,a,n,c){var r=t.year.toString().substring(2,4),s="BIAL-X"===e.company?"X":"R",i=t.date.format("YYYYMMDD");return a?"".concat(t.domain+r,"-").concat(e.customer_name,"-").concat(c).concat(s,"-").concat(n,"-").concat(t.projectName,"-v").concat(t.version,".").concat(t.extension):"".concat(t.domain+r,"-").concat(e.customer_name,"-").concat(c).concat(s,"-").concat(n,"-").concat(t.projectName,"-").concat(i,"-").concat(t.sequentialNumber,".").concat(t.extension)}(g,e.document,Pe(r,e.document.type),Me(r,e.document.type),ye.trim())),w(Object(le.a)(Object(le.a)({},e.document),{},{customer:g.customer_name})),z(3)},children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsxs)(ne.a,{md:{span:24},lg:{span:8},style:{padding:10},children:[Object(_e.jsx)(ce.a,{title:"Etape 1 : affaire s\xe9l\xe9ctionn\xe9e ",extra:Object(_e.jsx)(ee.a,{type:"primary",className:"classic-round-button",onClick:function(){D(!0)},shape:"circle",loading:a,children:null===g?Object(_e.jsx)(Ut.a,{}):Object(_e.jsx)(qt.a,{})}),children:null===g?Object(_e.jsx)("span",{children:"Selectionner une affaire"}):Object(_e.jsxs)(ae.a,{children:[Object(_e.jsxs)(ne.a,{xs:{span:12},lg:{span:24},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Titre "}),": ",Object(_e.jsx)(i.a,{to:"/contracts/".concat(g.contract_id),children:g.title})]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Client "}),": ",g.customer_name]})]}),Object(_e.jsxs)(ne.a,{xs:{span:12},lg:{span:24},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"Cr\xe9ateur"})," : ",g.creator]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:" Statut "}),": ",g.status," ",Object(_e.jsx)(Je,{status:g.status})]}),Object(_e.jsxs)("p",{children:[Object(_e.jsx)("b",{children:"ID de l'affaire Fitnet"}),":",Object(_e.jsx)($e.a.Item,{name:"generatedId",labelCol:{span:0},wrapperCol:{span:24},rules:[{required:!0,message:"Un num\xe9ro d'ID Fitnet est requis"},function(){return{validator:function(e,t){return t.trim().match(/^\d+$/)||"???"===t.trim()?Promise.resolve():Promise.reject(new Error("L'ID peut seulement \xeatre un num\xe9ro, remplacer par ??? si vous ne l'avez pas"))}}}],children:Object(_e.jsx)(re.a,{onChange:function(e){return ve(e.target.value)}})})]})]})]})}),Object(_e.jsx)(Pt.a,{title:"Selection d'une affaire",visible:A,onCancel:function(){D(!1)},footer:[],width:1e3,children:Object(_e.jsx)(Ke,{contracts:o.data,loading:a,size:3,isButton:!0,isPreview:!0,onClickButton:function(e){return function(e){y(e);var t=Re(e.title,null);ve(t),Y.setFieldsValue({document:Object(le.a)(Object(le.a)({},Y.getFieldValue.document),{},{projectName:e.title.split("-").slice(2).join("-")||e.title.split("-").slice(1).join("-")}),generatedId:t}),1===U&&z(2),D(!1)}(e)}})})]}),U>=2&&Object(_e.jsx)(_e.Fragment,{children:Object(_e.jsx)(ne.a,{md:{span:24},lg:{span:16},style:{padding:10},children:Object(_e.jsx)(ce.a,{title:"Etape 2 : autres crit\xe8res ",children:Object(_e.jsxs)(ae.a,{children:[Object(_e.jsxs)(ne.a,{xs:{span:24},md:{span:12},lg:{span:12},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsx)($e.a.Item,{label:"Domaine",name:["document","domain"],initialValue:"C",children:Object(_e.jsxs)(Ze.a,{children:[Object(_e.jsx)(d,{value:"C",children:"Client"}),Object(_e.jsx)(d,{value:"F",children:"Fournisseur"}),Object(_e.jsx)(d,{value:"P",children:"Partenaire"})]})}),Object(_e.jsx)($e.a.Item,{label:"Type",name:["document","type"],rules:[{required:!0,message:"Un type de document est requis"}],children:Object(_e.jsx)(Ze.a,{onChange:function(e){return function(e){ie(Pe(r,e))}(e)},children:r.map((function(e){return Object(_e.jsx)(d,{value:e.document_type_id,children:e.value})}))})}),Object(_e.jsx)($e.a.Item,{label:"Ann\xe9e",name:["document","year"],initialValue:Le(je()()),children:Object(_e.jsxs)(Ze.a,{children:[Object(_e.jsx)(d,{value:Le(je()().add(1,"years")),children:Le(je()().add(1,"years"))}),Object(_e.jsx)(d,{value:Le(je()()),children:Le(je()())}),Object(_e.jsx)(d,{value:Le(je()().subtract(1,"years")),children:Le(je()().subtract(1,"years"))})]})}),Object(_e.jsx)($e.a.Item,{label:"Date",name:["document","date"],initialValue:je()(),rules:[{required:!0,message:"Une date est requise"}],children:Object(_e.jsx)(Qe.a,{format:Ve,style:{width:"100%"}})}),Object(_e.jsx)($e.a.Item,{label:"Nom du projet",name:["document","projectName"],rules:[{required:!0,message:"Un nom de projet est requis"}],children:Object(_e.jsx)(re.a,{})})]}),Object(_e.jsxs)(ne.a,{xs:{span:24},md:{span:12},lg:{span:12},style:{paddingLeft:10,paddingRight:10},children:[Object(_e.jsx)($e.a.Item,{label:"New",name:["document","isNew"],initialValue:"new",children:Object(_e.jsxs)(Ze.a,{onChange:function(e){return H(e)},children:[Object(_e.jsx)(d,{value:"new",children:"Cr\xe9er un nouveau document"}),Object(_e.jsx)(d,{value:"old",children:"Cr\xe9er une nouvelle version"})]})}),Object(_e.jsx)($e.a.Item,{label:"Reference",name:["document","newDocument"],children:Object(_e.jsx)(re.a,{disabled:"new"===K,onClick:function(){return P(!0)},style:{width:"100%"},suffix:Object(_e.jsx)(Kt.a,{onClick:function(){"old"===K&&P(!0)}})})}),Object(_e.jsx)(Pt.a,{title:"Selection d'un document de r\xe9ference",visible:R,onCancel:function(){P(!1)},footer:[],width:1e3,children:Object(_e.jsx)(Ue,{documents:c.data,loading:a,size:3,isButton:!0,onClickButton:function(e){return function(e){var t=e.name,a=1;null!=e.sequentialNumber&&(a=e.sequentialNumber+1);var n="1.0";if(null!==e.version){var c=e.version.split(".");n="".concat(c[0],".").concat((parseInt(c[1],10)||0)+1)}Y.setFieldsValue({document:Object(le.a)(Object(le.a)({},Y.getFieldValue.document),{},{newDocument:t,sequentialNumber:a,version:n})}),P(!1)}(e)},isPreview:!0,documentsTypes:r})}),$?Object(_e.jsx)($e.a.Item,{label:"Num\xe9ro de version",name:["document","version"],rules:[{required:!0,message:"Un num\xe9ro de version est requis"},function(){return{validator:function(e,t){return t&&t.match(/^(\d+\.)(\d+)$/)?Promise.resolve():Promise.reject(new Error("Un Num\xe9ro de version X.X est requis"))}}}],children:Object(_e.jsx)(re.a,{})}):Object(_e.jsx)($e.a.Item,{label:"Num\xe9ro s\xe9quentiel",name:["document","sequentialNumber"],rules:[{required:!0,message:"Un num\xe9ro s\xe9quentiel est requis"}],children:Object(_e.jsx)(Jt.a,{})}),Object(_e.jsx)($e.a.Item,{label:"Extension",name:["document","extension"],rules:[{required:!0,message:"Une extension est requise"}],children:Object(_e.jsxs)(Ze.a,{children:[Object(_e.jsx)(d,{value:"docx",children:"docx"}),Object(_e.jsx)(d,{value:"xlsx",children:"xlsx"}),Object(_e.jsx)(d,{value:"pptx",children:"pptx"}),Object(_e.jsx)(d,{value:"pdf",children:"pdf"})]})}),Object(_e.jsx)($e.a.Item,{label:"Createur",name:["document","creator"],rules:[function(){return{validator:function(e,t){return t&&t.match(/^[A-Z]{3}$/)?Promise.resolve():Promise.reject(new Error("Un trigramme est requis"))}}}],children:Object(_e.jsx)(re.a,{})})]}),Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(se.a,{}),Object(_e.jsx)(ee.a,{type:"primary",className:"classic-button-form ",style:{margin:"0 auto",display:"block"},onClick:function(){return Y.submit()},children:"Generer le nom du fichier"})]})]})})})}),U>=3&&Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(ce.a,{title:"Etape 3 : nom g\xe9n\xe9r\xe9 ",extra:Object(_e.jsx)(ee.a,{type:"primary",className:"classic-button",onClick:function(){ke()},loading:a,children:"Enregistrer"}),children:Object(_e.jsx)("h3",{children:be})})}),null!==Oe&&Object(_e.jsx)(ne.a,{span:24,style:{padding:10},children:Object(_e.jsx)(We.a,{style:{marginTop:"10px"},message:"Erreur de sauvegarde",description:Oe,type:"error"})})]})})]})]})}));var Xt=Object(s.b)(null,{setLoading:m,initAll:Y})((function(){var e=Object(s.c)();return e(m(!0)),e(Y()),e(function(){var e=Object(l.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={error:"",data:[]},e.prev=1,e.next=4,fetch("".concat(u,"documents/keywords/"));case 4:if((n=e.sent).ok){e.next=9;break}a.error="An error has occured: ".concat(n.status),e.next=12;break;case 9:return e.next=11,n.json();case 11:a.data=e.sent;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),a.error="An error has occured: ".concat(e.t0.toString());case 17:t({type:X,payload:a});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()),Object(_e.jsx)(Vt,{children:Object(_e.jsxs)(i.b,{children:[Object(_e.jsx)(He,{path:"/"}),Object(_e.jsx)(it,{path:"/contracts"}),Object(_e.jsx)(yt,{path:"/contracts/:id"}),Object(_e.jsx)(ot,{path:"/documents"}),Object(_e.jsx)(Gt,{path:"/documents/:id"}),Object(_e.jsx)(Gt,{path:"/documents/modify/:id"}),Object(_e.jsx)(Ht,{path:"/documents/create"}),Object(_e.jsx)(Ht,{path:"/documents/create-for-contract/:id"}),Object(_e.jsx)(Bt,{path:"/metadata"}),Object(_e.jsx)(dt,{default:!0})]})})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Wt=a(109),$t=a(182),Zt={navbar:"",breadcrumb:[],loading:!1,loadingDatabase:!1,contracts:{error:"",data:[],filter:{commercials:[],projectManagers:[],creator:[],company:[]}},metadata:{documentsTypes:[],others:{},error:""},documents:{error:"",data:[]},updateTime:"",filter:{document:void 0,contract:void 0},keywords:{error:"",data:[]}},Qt=function(e){var t=[],a=[],n=[],c=[];e.data&&e.data.map((function(e){e.affected_commercials&&e.affected_commercials.map((function(e){return e!==[]&&!t.find((function(t){return t.employeeId===e.employeeId}))&&t.push(e)})),e.affected_project_managers&&e.affected_project_managers.map((function(t){return t!==[]&&!a.find((function(e){return e.employeeId===t.employeeId}))&&a.push(Object(le.a)(Object(le.a)({},t),{},{company:e.company}))})),e.creator&&!n.find((function(t){return tt(e.creator)===tt(t)}))&&n.push(e.creator.trim()),e.company&&!c.find((function(t){return tt(e.company)===tt(t)}))&&c.push(e.company.trim())}));var r=[];return a.map((function(e){var t=r.find((function(t){return tt(t.fullName)===tt(e.fullName)}));t?t.employeeId.push(e.employeeId):r.push({fullName:e.fullName,employeeId:[e.employeeId]})})),{commercials:t.sort((function(e,t){return e.fullName.trim().localeCompare(t.fullName.trim())})),projectManagers:r.sort((function(e,t){return e.fullName.trim().localeCompare(t.fullName.trim())})),creator:n.sort((function(e,t){return e.trim().localeCompare(t.trim())})),company:c.sort((function(e,t){return e.trim().localeCompare(t.trim())}))}},ea=function(e){var t={};e.map((function(e){t[e.group]?t[e.group].push(e):t[e.group]=[e]})),Object.keys(t).map((function(e){return t[e].sort((function(e,t){return e.value.trim().localeCompare(t.value.trim())}))}));var a={};return Object.keys(t).sort((function(e,t){return e.trim().localeCompare(t.trim())})).map((function(e){a[e]=t[e]})),a},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case j:return t.payload.reset?Object(le.a)(Object(le.a)({},e),{},{breadcrumb:Object(Xe.a)(t.payload.data)}):Object(le.a)(Object(le.a)({},e),{},{breadcrumb:[].concat(Object(Xe.a)(e.breadcrumb),Object(Xe.a)(t.payload.data))});case p:return Object(le.a)(Object(le.a)({},e),{},{loading:t.payload});case h:return Object(le.a)(Object(le.a)({},e),{},{loadingDatabase:t.payload});case x:return Object(le.a)(Object(le.a)({},e),{},{navbar:t.payload});case g:return Object(le.a)(Object(le.a)({},e),{},{loadingDatabase:!1});case v:return Object(le.a)(Object(le.a)({},e),{},{updateTime:t.payload,loading:!1});case _:return Object(le.a)(Object(le.a)({},e),{},{contracts:{error:t.payload.error,data:t.payload.data,filter:Qt(t.payload)},loading:!1});case w:var a={};if(""!==t.payload.error)a={documentsTypes:[],others:{},error:t.payload.error};else{var n=[];t.payload.data.documentsTypes.map((function(e){n.push(Object(le.a)({group:"documentsTypes"},e))})),a={documentsTypes:n.sort((function(e,t){return e.key.trim().localeCompare(t.key.trim())})),others:ea(t.payload.data.metadata),error:""}}return Object(le.a)(Object(le.a)({},e),{},{metadata:a,loading:!1});case S:if(!t.payload.group){var c=e.metadata.documentsTypes.findIndex((function(e){return e.document_type_id===t.payload.document_type_id})),r=Object(Xe.a)(e.metadata.documentsTypes);return r[c]=Object(le.a)({group:"documentsTypes"},t.payload),Object(le.a)(Object(le.a)({},e),{},{metadata:Object(le.a)(Object(le.a)({},e.metadata),{},{documentsTypes:r})})}var s=e.metadata.others[t.payload.group].findIndex((function(e){return e.metadata_id===t.payload.metadata_id})),i=Object(Xe.a)(e.metadata.others[t.payload.group]);i[s]=t.payload;var o=Object(le.a)({},e.metadata.others);return o[t.payload.group]=i,Object(le.a)(Object(le.a)({},e),{},{metadata:Object(le.a)(Object(le.a)({},e.metadata),{},{others:o})});case E:if(!t.payload.group)return Object(le.a)(Object(le.a)({},e),{},{metadata:Object(le.a)(Object(le.a)({},e.metadata),{},{documentsTypes:[Object(le.a)({group:"documentsTypes"},t.payload)].concat(Object(Xe.a)(e.metadata.documentsTypes))})});var d=Object(le.a)({},e.metadata.others);return d[t.payload.group]?d[t.payload.group]=[t.payload].concat(Object(Xe.a)(d[t.payload.group])):d[t.payload.group]=[t.payload],Object(le.a)(Object(le.a)({},e),{},{metadata:Object(le.a)(Object(le.a)({},e.metadata),{},{others:d})});case N:if(!t.payload.group)return Object(le.a)(Object(le.a)({},e),{},{metadata:Object(le.a)(Object(le.a)({},e.metadata),{},{documentsTypes:Object(Xe.a)(e.metadata.documentsTypes.filter((function(e){return e.document_type_id!==t.payload.id})))})});var l=Object(le.a)({},e.metadata.others);return l[t.payload.group]=Object(Xe.a)(l[t.payload.group].filter((function(e){return e.metadata_id!==t.payload.id}))),Object(le.a)(Object(le.a)({},e),{},{metadata:Object(le.a)(Object(le.a)({},e.metadata),{},{others:l})});case D:var u=Object(le.a)({},e.metadata.others),b={};return Object.keys(u).map((function(e){e!==t.payload.group?b[e]=u[e]:b[t.payload.newGroup]=u[e]})),Object(le.a)(Object(le.a)({},e),{},{metadata:Object(le.a)(Object(le.a)({},e.metadata),{},{others:b})});case L:var m=Object(le.a)({},e.metadata.others),O={};return Object.keys(m).map((function(e){e!==t.payload.group&&(O[e]=m[e])})),Object(le.a)(Object(le.a)({},e),{},{metadata:Object(le.a)(Object(le.a)({},e.metadata),{},{others:O})});case V:return Object(le.a)(Object(le.a)({},e),{},{documents:{error:t.payload.error,data:t.payload.data},loading:!1});case M:return Object(le.a)(Object(le.a)({},e),{},{documents:{error:t.payload.error,data:e.documents.data.filter((function(e){return e.document_id!==t.payload.id}))},loading:!1});case U:return Object(le.a)(Object(le.a)({},e),{},{documents:{error:e.documents.error,data:[].concat(Object(Xe.a)(e.documents.data.filter((function(e){return e.document_id!==t.payload.document_id}))),[t.payload])},loading:!1});case P:return Object(le.a)(Object(le.a)({},e),{},{documents:Object(le.a)(Object(le.a)({},e.documents),{},{data:[].concat(Object(Xe.a)(e.documents.data),[t.payload])})});case B:var f={};if(""!==t.payload.metadata.error)f={documentsTypes:[],others:{},error:t.payload.error};else{var y=[];t.payload.metadata.data.documentsTypes.map((function(e){y.push(Object(le.a)({group:"documentsTypes"},e))})),f={documentsTypes:y.sort((function(e,t){return e.key.trim().localeCompare(t.key.trim())})),others:ea(t.payload.metadata.data.metadata),error:t.payload.error}}return Object(le.a)(Object(le.a)({},e),{},{metadata:f,documents:{error:t.payload.documents.error,data:t.payload.documents.data},contracts:{error:t.payload.contracts.error,data:t.payload.contracts.data,filter:Qt(t.payload.contracts)},updateTime:t.payload.updateTime,loading:!1});case K:return Object(le.a)(Object(le.a)({},e),{},{filter:Object(le.a)(Object(le.a)({},e.filter),{},{document:t.payload})});case G:return Object(le.a)(Object(le.a)({},e),{},{filter:Object(le.a)(Object(le.a)({},e.filter),{},{contract:t.payload})});case X:return Object(le.a)(Object(le.a)({},e),{},{keywords:t.payload});case W:var k=t.payload.data,C=e.contracts.data.map((function(e){return e.contract_id===k.contract_id?k:e}));return Object(le.a)(Object(le.a)({},e),{},{contracts:Object(le.a)(Object(le.a)({},e.contracts),{},{data:C})});default:return e}},aa=Object(Wt.c)(ta,Object(Wt.a)($t.a));r.a.render(Object(_e.jsx)(s.a,{store:aa,children:Object(_e.jsx)(Xt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[288,1,2]]]);
//# sourceMappingURL=main.a7c1c9ad.chunk.js.map